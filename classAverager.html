<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="SXS Collaboration">
    <meta name="generator" content="Doxygen 1.8.17"/>
    <style>
        /*!
         * IE10 viewport hack for Surface/desktop Windows 8 bug
         * Copyright 2014-2015 Twitter, Inc.
         * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
         */
        @-webkit-viewport { width: device-width; }
        @-moz-viewport    { width: device-width; }
        @-ms-viewport     { width: device-width; }
        @-o-viewport      { width: device-width; }
        @viewport         { width: device-width; }
      </style>
  <title>SpECTRE: Averager&lt; DerivOrder &gt; Class Template Reference</title>
  <link href="tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="./MathJax.js"></script>
  <link href="octicons.css" rel="stylesheet">
  <link href="bootstrap.min.css" rel="stylesheet">
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="popper.min.js"></script>
  <script type="text/javascript" src="bootstrap.min.js"></script>
  <script type="text/javascript" src="spectre.js"></script>
  </head>
  <body>
  <div id="top" class="navbar-fixed-top"><!-- do not remove this div, it is closed by doxygen! -->
  <!-- BEGIN TITLEAREA -->
  <div id="titlearea">
  <script type="text/javascript">
  var searchBox = new SearchBox("searchBox", "search",false,'Search');
  </script>
  <div id="main-nav">
    <ul class="sm sm-dox" id="main-menu">
      <li>
      <a href="index.html">
      SpECTRE &#160;
        <span id="projectnumber">v2020.12.07</span>
      </a>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="selected">
          <span id="selected">
            <i class="octicon octicon-book"></i><span>Documentation</span>
          </span>
          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <li style="min-width: 135px;">
            <a href="index.html">
            <i class="octicon octicon-book"></i><span>Introduction</span></a>
          </li>
          <li style="min-width: 135px;">
            <a href="versioning_and_releases.html">
              <i class="octicon octicon-versions"></i><span>Releases</span>
            </a>
          </li>
          <li style="min-width: 135px;">
            <a href="installation.html">
              <i class="octicon octicon-desktop-download"></i><span>Installation</span>
            </a>
          </li>
          <li style="min-width: 135px;">
            <a href="tutorials.html">
              <i class="octicon octicon-mortar-board"></i><span>User Tutorials</span>
            </a>
          </li>
          <li style="min-width: 135px;">
            <a href="dev_guide.html">
              <i class="octicon octicon-gist-secret"></i><span>Dev Guide</span>
            </a>
          </li>
          <li style="min-width: 135px;">
            <a href="code_of_conduct.html">
              <i class="octicon octicon-comment-discussion"></i><span>Code of Conduct</span>
            </a>
          </li>
          <li style="min-width: 135px;">
            <a href="contributing_to_spectre.html">
              <i class="octicon octicon-git-pull-request"></i><span>Contributing Guide</span>
            </a>
          </li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="selected">
          <span id="selected">
            <i class="octicon octicon-code"></i>
              <span>Code Reference</span>
          </span>
          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <li style="min-width: 130px;">
            <a href="modules.html">
              <i class="octicon octicon-code"></i>
              <span>Topics</span>
            </a>
          </li>
          <li style="min-width: 130px;">
            <a href="namespaces.html">
              <i class="octicon octicon-gist"></i>
              <span>Namespaces</span>
            </a>
          </li>
        </ul>
      </li>
      <li>
        <a href="files.html">
          <i class="octicon octicon-file-directory"></i><span>Files</span>
        </a>
      </li>
      <li>
        <a href="citelist.html">
          <i class="octicon octicon-file-text"></i><span>Bibliography</span>
        </a>
      </li>
      <li>
        <a href="https://github.com/sxs-collaboration/spectre" target="_blank">
          <i class="octicon octicon-mark-github"></i><span>View on GitHub</span>
        </a>
      </li>
      <!--The Search <li> is added by doxygen later-->
    </ul>
  </div><!-- main-nav -->
  </div><!-- titlearea -->
  <!-- window showing the filter options -->
  <div id="MSearchSelectWindow"  style="position: fixed;"
       onmouseover="return searchBox.OnSearchSelectShow()"
       onmouseout="return searchBox.OnSearchSelectHide()"
       onkeydown="return searchBox.OnSearchSelectKey(event)">
  </div>
  <!-- iframe showing the search results (closed by default) -->
  <div id="MSearchResultsWindow"  style="position: fixed;">
  <iframe src="javascript:void(0)" frameborder="0"
          name="MSearchResults" id="MSearchResults">
  </iframe>
  </div>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classAverager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Averager&lt; DerivOrder &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__ControlSystemGroup.html">Control System</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="Averager_8hpp_source.html">Averager.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9fae863ddaac26aba442a5c62c603078"><td class="memItemLeft" align="right" valign="top"><a id="a9fae863ddaac26aba442a5c62c603078"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAverager.html#a9fae863ddaac26aba442a5c62c603078">Averager</a> (double avg_timescale_frac, bool average_0th_deriv_of_q) noexcept</td></tr>
<tr class="memdesc:a9fae863ddaac26aba442a5c62c603078"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code>avg_timescale_frac</code> determines the exponential averaging timescale through \(\tau_\mathrm{avg} = \)<code>avg_timescale_frac</code> \(\times \tau\), where \(\tau\) is the damping time. <code>avg_timescale_frac</code> must be positive. <code>average_0th_deriv_of_q</code> determines whether the call operator returns an averaged or unaveraged quantity for the 0th derivative of \(Q\). <code>true</code> returns an averaged 0th derivative of \(Q\). <code>false</code> returns the raw 0th derivative of \(Q\). The derivatives are always averaged (to reduce noise due to numerical differentiation), so the <code>average_0th_deriv_of_q</code> option only specifies whether to return an averaged value for the 0th derivative piece of the function. <br /></td></tr>
<tr class="separator:a9fae863ddaac26aba442a5c62c603078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac6424ac457c95527d96bdc1ec63b8a8"><td class="memItemLeft" align="right" valign="top"><a id="aac6424ac457c95527d96bdc1ec63b8a8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Averager</b> (<a class="el" href="classAverager.html">Averager</a> &amp;&amp;rhs) noexcept</td></tr>
<tr class="separator:aac6424ac457c95527d96bdc1ec63b8a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805d0e443598bdd38a025fcb8bf258dd"><td class="memItemLeft" align="right" valign="top"><a id="a805d0e443598bdd38a025fcb8bf258dd"></a>
<a class="el" href="classAverager.html">Averager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classAverager.html">Averager</a> &amp;&amp;rhs) noexcept</td></tr>
<tr class="separator:a805d0e443598bdd38a025fcb8bf258dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0531d041f37b600d72a3204dab1b500f"><td class="memItemLeft" align="right" valign="top"><a id="a0531d041f37b600d72a3204dab1b500f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Averager</b> (const <a class="el" href="classAverager.html">Averager</a> &amp;)=delete</td></tr>
<tr class="separator:a0531d041f37b600d72a3204dab1b500f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d4de2fc36c0b11b01ecf6037564a09"><td class="memItemLeft" align="right" valign="top"><a id="a25d4de2fc36c0b11b01ecf6037564a09"></a>
<a class="el" href="classAverager.html">Averager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classAverager.html">Averager</a> &amp;)=delete</td></tr>
<tr class="separator:a25d4de2fc36c0b11b01ecf6037564a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1830a4f4c68aabce1f52dce1569fb5cc"><td class="memItemLeft" align="right" valign="top"><a id="a1830a4f4c68aabce1f52dce1569fb5cc"></a>
const boost::optional&lt; <a class="elRef" href="http://en.cppreference.com/w/cpp/container/array.html">std::array</a>&lt; <a class="el" href="classDataVector.html">DataVector</a>, DerivOrder+1 &gt; &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAverager.html#a1830a4f4c68aabce1f52dce1569fb5cc">operator()</a> (double time) const noexcept</td></tr>
<tr class="memdesc:a1830a4f4c68aabce1f52dce1569fb5cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns \(Q\) and its derivatives at \(t=\)<code>time</code>, provided there is sufficient data. The averager is limited by the need for at least (<code>DerivOrder</code> + 1) data points in order to provide the <code>DerivOrder</code>'th derivative. If sufficient data is available, it returns \(Q\) and averaged derivatives of \(Q\) up to the <code>DerivOrder</code>'th derivative, at \(t=\)<code>time</code>. If <code><a class="el" href="classAverager.html#a382e256e426c919c1531b923be586e75" title="Returns a bool corresponding to whether average_0th_deriv_of_q is true/false.">using_average_0th_deriv_of_q()</a></code> is <code>true</code>, then the returned 0th derivative of \(Q\) is also averaged. In the case that there is insufficient data, the operator returns an unitialized <code>boost::optional</code> (<code>boost::none</code>). <br /></td></tr>
<tr class="separator:a1830a4f4c68aabce1f52dce1569fb5cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2fe060aeedef0de5ba59b22d63f340d"><td class="memItemLeft" align="right" valign="top"><a id="ae2fe060aeedef0de5ba59b22d63f340d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAverager.html#ae2fe060aeedef0de5ba59b22d63f340d">clear</a> () noexcept</td></tr>
<tr class="memdesc:ae2fe060aeedef0de5ba59b22d63f340d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function that allows for resetting the averager. <br /></td></tr>
<tr class="separator:ae2fe060aeedef0de5ba59b22d63f340d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a31d82a54977940a5a869a0c1bae9df"><td class="memItemLeft" align="right" valign="top"><a id="a4a31d82a54977940a5a869a0c1bae9df"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAverager.html#a4a31d82a54977940a5a869a0c1bae9df">update</a> (double time, const <a class="el" href="classDataVector.html">DataVector</a> &amp;raw_q, const <a class="el" href="classDataVector.html">DataVector</a> &amp;timescales) noexcept</td></tr>
<tr class="memdesc:a4a31d82a54977940a5a869a0c1bae9df"><td class="mdescLeft">&#160;</td><td class="mdescRight">The function responsible for updating the averaged values at \(t=\)<code>time</code>. Requires <code>raw_q</code> (the raw components of \(Q(t)\)) and <code>timescales</code> (the associated damping times for each component). <br /></td></tr>
<tr class="separator:a4a31d82a54977940a5a869a0c1bae9df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01699c1c356f2febdf414e42971c613c"><td class="memItemLeft" align="right" valign="top"><a id="a01699c1c356f2febdf414e42971c613c"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAverager.html#a01699c1c356f2febdf414e42971c613c">last_time_updated</a> () const noexcept</td></tr>
<tr class="memdesc:a01699c1c356f2febdf414e42971c613c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the latest time at which the averager has sufficient data to return \(Q\) and its derivatives. <br /></td></tr>
<tr class="separator:a01699c1c356f2febdf414e42971c613c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8cbf4230a01c21d7ba6c2e994fd891"><td class="memItemLeft" align="right" valign="top"><a id="a0f8cbf4230a01c21d7ba6c2e994fd891"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAverager.html#a0f8cbf4230a01c21d7ba6c2e994fd891">average_time</a> (double time) const noexcept</td></tr>
<tr class="memdesc:a0f8cbf4230a01c21d7ba6c2e994fd891"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the exponentially averaged time at \(t=\)<code>time</code>. The time is averaged along side \(Q\) to determine the effective time at which the average value is computed. The effective time is retarded, due to the weighting of past times. <br /></td></tr>
<tr class="separator:a0f8cbf4230a01c21d7ba6c2e994fd891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a382e256e426c919c1531b923be586e75"><td class="memItemLeft" align="right" valign="top"><a id="a382e256e426c919c1531b923be586e75"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAverager.html#a382e256e426c919c1531b923be586e75">using_average_0th_deriv_of_q</a> () const noexcept</td></tr>
<tr class="memdesc:a382e256e426c919c1531b923be586e75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a bool corresponding to whether <code>average_0th_deriv_of_q</code> is <code>true</code>/<code>false</code>. <br /></td></tr>
<tr class="separator:a382e256e426c919c1531b923be586e75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;size_t DerivOrder&gt;<br />
class Averager&lt; DerivOrder &gt;</h3>

<p>A weighted exponential averager of \(Q\) and its derivatives implementing Appendix A in <a class="el" href="citelist.html#CITEREF_Hemberger2012jz">[36]</a></p>
<p>The purpose of the averager is to provide \(Q\) and 'smoothed' numerical derivatives of \(Q\) up to the <code>DerivOrder</code>'th derivative. The 0th derivative of \(Q\) is not typically averaged, since no differencing is necessary and no noise is introduced. The <code>average_0th_deriv_of_q</code> option allows for specifying that the 0th derivative should be averaged in addition to the derivatives. This may be desirable for control systems where \(Q\) contains some 'noise', e.g. size control typically uses an averaged \(Q\) since the raw computed \(Q\) is a function of the minimum on a surface and may jump around discontinuously.</p>
<p>The averager is designed to support an arbitrary DerivOrder, however the private get_derivs method currently only supports DerivOrder = 2. If an additional DerivOrder is needed, finite differencing needs to be implemented to specifically handle that order (as it seems like overkill to generalize the differencing stencil at this time). </p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li>src/ControlSystem/<a class="el" href="Averager_8hpp_source.html">Averager.hpp</a></li>
<li>src/ControlSystem/Averager.cpp</li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
&copy; Copyright 2017 - 2020
<a href="https://black-holes.org">SXS Collaboration</a>,
<a href="LICENSE.txt" target="_blank">
<span class="hidden-xs">Distributed under the</span>
MIT License</a>
</small></address>
</body>
</html>
