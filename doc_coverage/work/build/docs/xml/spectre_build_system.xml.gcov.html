<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - 102d152bb208d020115bc267fd9f132d57025466 - /work/build/docs/xml/spectre_build_system.xml</title>
  <link rel="stylesheet" type="text/css" href="../../../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title"> SpECTRE Documentation Coverage Report</td></tr>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../../../index.html">top level</a> - <a href="index.html">work/build/docs/xml</a> - spectre_build_system.xml</td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
             <td class="headerItem">Commit:</td>
             <td class="headerValue"><a target="_blank" href="https://github.com/sxs-collaboration/spectre/commit/102d152bb208d020115bc267fd9f132d57025466">102d152bb208d020115bc267fd9f132d57025466</a></td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2021-01-05 20:09:09</td>
            <td></td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span><span class="lineCov">          1 : &lt;?xml version='1.0' encoding='UTF-8' standalone='no'?&gt;</span></a>
<a name="2"><span class="lineNum">       2 </span>            : &lt;doxygen xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;compound.xsd&quot; version=&quot;1.8.17&quot;&gt;</a>
<a name="3"><span class="lineNum">       3 </span>            :   &lt;compounddef id=&quot;spectre_build_system&quot; kind=&quot;page&quot;&gt;</a>
<a name="4"><span class="lineNum">       4 </span>            :     &lt;compoundname&gt;spectre_build_system&lt;/compoundname&gt;</a>
<a name="5"><span class="lineNum">       5 </span>            :     &lt;title&gt;Build System&lt;/title&gt;</a>
<a name="6"><span class="lineNum">       6 </span>            :     &lt;briefdescription&gt;</a>
<a name="7"><span class="lineNum">       7 </span>            :     &lt;/briefdescription&gt;</a>
<a name="8"><span class="lineNum">       8 </span>            :     &lt;detaileddescription&gt;</a>
<a name="9"><span class="lineNum">       9 </span>            : &lt;sect1 id=&quot;spectre_build_system_1cmake&quot;&gt;</a>
<a name="10"><span class="lineNum">      10 </span>            : &lt;title&gt;CMake&lt;/title&gt;</a>
<a name="11"><span class="lineNum">      11 </span>            : &lt;para&gt;SpECTRE uses &lt;ulink url=&quot;https://cmake.org/&quot;&gt;CMake&lt;/ulink&gt; for the build system. In this section of the guide we outline how to &lt;ulink url=&quot;#adding_source_files&quot;&gt;add new source files&lt;/ulink&gt;, &lt;ulink url=&quot;#adding_libraries&quot;&gt;libraries&lt;/ulink&gt;, &lt;ulink url=&quot;#adding_unit_tests&quot;&gt;unit tests&lt;/ulink&gt;, &lt;ulink url=&quot;#adding_executables&quot;&gt;executables&lt;/ulink&gt;, and &lt;ulink url=&quot;#adding_external_dependencies&quot;&gt;external dependencies&lt;/ulink&gt;. We also describe &lt;ulink url=&quot;#common_cmake_flags&quot;&gt;commonly used CMake flags&lt;/ulink&gt;.&lt;/para&gt;</a>
<a name="12"><span class="lineNum">      12 </span>            : &lt;para&gt;Note that in editing &lt;computeroutput&gt;CMakeLists.txt&lt;/computeroutput&gt; files, it is conventional to indent multiline commands by two spaces (except for the first line), and to separate most commands by blank lines.&lt;/para&gt;</a>
<a name="13"><span class="lineNum">      13 </span>            : &lt;sect2 id=&quot;spectre_build_system_1adding_source_files&quot;&gt;</a>
<a name="14"><span class="lineNum">      14 </span>            : &lt;title&gt;Adding Source Files&lt;/title&gt;</a>
<a name="15"><span class="lineNum">      15 </span>            : &lt;para&gt;SpECTRE organizes source files into subdirectories of &lt;computeroutput&gt;src&lt;/computeroutput&gt; that are compiled into libraries. To add a new source file &lt;computeroutput&gt;FILE.cpp&lt;/computeroutput&gt; to an existing library in &lt;computeroutput&gt;src/PATH/DIR&lt;/computeroutput&gt;, just edit &lt;computeroutput&gt;src/PATH/DIR/CMakeLists.txt&lt;/computeroutput&gt; and add &lt;computeroutput&gt;FILE.cpp&lt;/computeroutput&gt; to the list of files in &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;set(LIBRARY_SOURCES&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="16"><span class="lineNum">      16 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&amp;lt;list_of_files&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="17"><span class="lineNum">      17 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;)&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="18"><span class="lineNum">      18 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="19"><span class="lineNum">      19 </span>            : &lt;para&gt;such that the resulting &lt;computeroutput&gt;&amp;lt;list_of_files&amp;gt;&lt;/computeroutput&gt; is in alphabetical order.&lt;/para&gt;</a>
<a name="20"><span class="lineNum">      20 </span>            : &lt;sect3 id=&quot;spectre_build_system_1adding_libraries&quot;&gt;</a>
<a name="21"><span class="lineNum">      21 </span>            : &lt;title&gt;Adding Libraries&lt;/title&gt;</a>
<a name="22"><span class="lineNum">      22 </span>            : &lt;para&gt;To add a source file &lt;computeroutput&gt;FILE.cpp&lt;/computeroutput&gt; that is compiled into a new library &lt;computeroutput&gt;LIB&lt;/computeroutput&gt; in a directory &lt;computeroutput&gt;src/PATH/DIR&lt;/computeroutput&gt; (either in a new directory, or in an existing directory that either does not have a &lt;computeroutput&gt;CMakeLists.txt&lt;/computeroutput&gt; file, or does not create a library in the existing &lt;computeroutput&gt;CMakeLists.txt&lt;/computeroutput&gt;):&lt;itemizedlist&gt;</a>
<a name="23"><span class="lineNum">      23 </span>            : &lt;listitem&gt;&lt;para&gt;Create (if necessary) a &lt;computeroutput&gt;CMakeLists.txt&lt;/computeroutput&gt; file in &lt;computeroutput&gt;DIR&lt;/computeroutput&gt;, with the following two lines at the top: &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;#&lt;sp/&gt;Distributed&lt;sp/&gt;under&lt;sp/&gt;the&lt;sp/&gt;MIT&lt;sp/&gt;License.&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="24"><span class="lineNum">      24 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;#&lt;sp/&gt;See&lt;sp/&gt;LICENSE.txt&lt;sp/&gt;for&lt;sp/&gt;details.&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="25"><span class="lineNum">      25 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="26"><span class="lineNum">      26 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;In the parent directory (i.e. &lt;computeroutput&gt;src/PATH&lt;/computeroutput&gt;), (if necessary) add the following line to its &lt;computeroutput&gt;CMakeLists.txt&lt;/computeroutput&gt; file (if necessary, recursively do the previous step and this one until you reach a &lt;computeroutput&gt;CMakeLists.txt&lt;/computeroutput&gt; that adds the appropriate subdirectory): &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;add_subdirectory(DIR)&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="27"><span class="lineNum">      27 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="28"><span class="lineNum">      28 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="29"><span class="lineNum">      29 </span>            : &lt;/para&gt;</a>
<a name="30"><span class="lineNum">      30 </span>            : &lt;para&gt;If there are already other &lt;computeroutput&gt;add_subdirectory()&lt;/computeroutput&gt; lines in the file, place the new one so that the subdirectories are in alphabetical order.&lt;itemizedlist&gt;</a>
<a name="31"><span class="lineNum">      31 </span>            : &lt;listitem&gt;&lt;para&gt;Add the line: &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;set(LIBRARY&lt;sp/&gt;LIB)&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="32"><span class="lineNum">      32 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="33"><span class="lineNum">      33 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="34"><span class="lineNum">      34 </span>            : &lt;/para&gt;</a>
<a name="35"><span class="lineNum">      35 </span>            : &lt;para&gt;where convention is that &lt;computeroutput&gt;LIB&lt;/computeroutput&gt; = &lt;computeroutput&gt;DIR&lt;/computeroutput&gt;. As library names must be unique, this is not always possible, in which case the convention is to prepend the parent directory to &lt;computeroutput&gt;DIR&lt;/computeroutput&gt;.&lt;itemizedlist&gt;</a>
<a name="36"><span class="lineNum">      36 </span>            : &lt;listitem&gt;&lt;para&gt;Add the lines &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;set(LIBRARY_SOURCES&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="37"><span class="lineNum">      37 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;FILE.cpp&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="38"><span class="lineNum">      38 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;)&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="39"><span class="lineNum">      39 </span>            : &lt;codeline&gt;&lt;/codeline&gt;</a>
<a name="40"><span class="lineNum">      40 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;add_spectre_library(${LIBRARY}&lt;sp/&gt;${LIBRARY_SOURCES})&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="41"><span class="lineNum">      41 </span>            : &lt;codeline&gt;&lt;/codeline&gt;</a>
<a name="42"><span class="lineNum">      42 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;target_link_libraries(&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="43"><span class="lineNum">      43 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;${LIBRARY}&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="44"><span class="lineNum">      44 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&amp;lt;list_of_interfaces&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="45"><span class="lineNum">      45 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;)&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="46"><span class="lineNum">      46 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="47"><span class="lineNum">      47 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="48"><span class="lineNum">      48 </span>            : &lt;/para&gt;</a>
<a name="49"><span class="lineNum">      49 </span>            : &lt;para&gt;where &lt;computeroutput&gt;&amp;lt;list_of_interfaces&amp;gt;&lt;/computeroutput&gt; is an alphabetized list of lines of the form &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;INTERFACE&lt;sp/&gt;SOME_LIBRARY&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="50"><span class="lineNum">      50 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="51"><span class="lineNum">      51 </span>            : &lt;para&gt;where &lt;computeroutput&gt;SOME_LIBRARY&lt;/computeroutput&gt; is a library that must be linked in order for the new library to be successfully linked in an executable.&lt;/para&gt;</a>
<a name="52"><span class="lineNum">      52 </span>            : &lt;/sect3&gt;</a>
<a name="53"><span class="lineNum">      53 </span>            : &lt;/sect2&gt;</a>
<a name="54"><span class="lineNum">      54 </span>            : &lt;sect2 id=&quot;spectre_build_system_1adding_unit_tests&quot;&gt;</a>
<a name="55"><span class="lineNum">      55 </span>            : &lt;title&gt;Adding Unit Tests&lt;/title&gt;</a>
<a name="56"><span class="lineNum">      56 </span>            : &lt;para&gt;We use the &lt;ulink url=&quot;https://github.com/philsquared/Catch&quot;&gt;Catch&lt;/ulink&gt; testing framework for unit tests. All unit tests are housed in &lt;computeroutput&gt;tests/Unit&lt;/computeroutput&gt; with subdirectories for each subdirectory of &lt;computeroutput&gt;src&lt;/computeroutput&gt;. Add the &lt;computeroutput&gt;cpp&lt;/computeroutput&gt; file to the appropriate subdirectory and also to the &lt;computeroutput&gt;CMakeLists.txt&lt;/computeroutput&gt; in that subdirectory. Inside the source file you can create a new test by adding a &lt;computeroutput&gt;SPECTRE_TEST_CASE(&amp;quot;Unit.Dir.Component&amp;quot;, &amp;quot;[Unit][Dir][Tag]&amp;quot;)&lt;/computeroutput&gt;. The &lt;computeroutput&gt;[Tag]&lt;/computeroutput&gt; is optional and you can have more than one, but the tags should be used quite sparingly. The purpose of the tags is to be able to run all unit tests or all tests of a particular set of components, e.g. &lt;computeroutput&gt;ctest -L Data&lt;/computeroutput&gt; to run all tests inside the &lt;computeroutput&gt;Data&lt;/computeroutput&gt; directory. Please see &lt;ref refid=&quot;writing_unit_tests&quot; kindref=&quot;compound&quot;&gt;writing unit tests&lt;/ref&gt;, other unit tests and the &lt;ulink url=&quot;https://github.com/philsquared/Catch&quot;&gt;Catch documentation&lt;/ulink&gt; for more help on writing tests. Unit tests should take as short a time as possible, with a goal of less than two seconds. Please also limit the number of distinct cases (by using &lt;computeroutput&gt;SECTION&lt;/computeroutput&gt;s).&lt;/para&gt;</a>
<a name="57"><span class="lineNum">      57 </span>            : &lt;para&gt;You can check the unit test coverage of your code by installing all the optional components and then running &lt;computeroutput&gt;make unit-test-coverage&lt;/computeroutput&gt; (after re-running CMake). This will create the directory &lt;computeroutput&gt;BUILD_DIR/docs/html/unit-test-coverage/&lt;/computeroutput&gt; which is where the coverage information is located. Open the &lt;computeroutput&gt;index.html&lt;/computeroutput&gt; file in your browser and make sure that your tests are indeed checking all lines of your code. Your pull requests might not be merged until your line coverage is over 90% (we are aiming for 100% line coverage wherever possible). Unreachable lines of code can be excluded from coverage analysis by adding the inline comment &lt;computeroutput&gt;LCOV_EXCL_LINE&lt;/computeroutput&gt; or a block can be excluded using &lt;computeroutput&gt;LCOV_EXCL_START&lt;/computeroutput&gt; and &lt;computeroutput&gt;LCOV_EXCL_STOP&lt;/computeroutput&gt;. However, this should be used extremely sparingly since unreachable code paths should be removed from the code base altogether.&lt;/para&gt;</a>
<a name="58"><span class="lineNum">      58 </span>            : &lt;/sect2&gt;</a>
<a name="59"><span class="lineNum">      59 </span>            : &lt;sect2 id=&quot;spectre_build_system_1adding_executables&quot;&gt;</a>
<a name="60"><span class="lineNum">      60 </span>            : &lt;title&gt;Adding Executables&lt;/title&gt;</a>
<a name="61"><span class="lineNum">      61 </span>            : &lt;para&gt;All general executables are found in &lt;computeroutput&gt;src/Executables&lt;/computeroutput&gt;, while those for specific evolution (elliptic) systems are found in &lt;computeroutput&gt;src/Evolution/Executables&lt;/computeroutput&gt; (&lt;computeroutput&gt;src/Elliptic/Executables&lt;/computeroutput&gt;). See &lt;ref refid=&quot;dev_guide_creating_executables&quot; kindref=&quot;compound&quot;&gt;how to create executables&lt;/ref&gt;.&lt;/para&gt;</a>
<a name="62"><span class="lineNum">      62 </span>            : &lt;/sect2&gt;</a>
<a name="63"><span class="lineNum">      63 </span>            : &lt;sect2 id=&quot;spectre_build_system_1adding_external_dependencies&quot;&gt;</a>
<a name="64"><span class="lineNum">      64 </span>            : &lt;title&gt;Adding External Dependencies&lt;/title&gt;</a>
<a name="65"><span class="lineNum">      65 </span>            : &lt;para&gt;To add an external dependency, first add a &lt;computeroutput&gt;SetupDEPENDENCY.cmake&lt;/computeroutput&gt; file to the &lt;computeroutput&gt;cmake&lt;/computeroutput&gt; directory. You should model this after one of the existing ones for &lt;computeroutput&gt;Catch&lt;/computeroutput&gt; or &lt;computeroutput&gt;Brigand&lt;/computeroutput&gt; if you&amp;apos;re adding a header-only library and &lt;computeroutput&gt;yaml-cpp&lt;/computeroutput&gt; if the library is not header-only. If CMake does not already support &lt;computeroutput&gt;find_package&lt;/computeroutput&gt; for the library you&amp;apos;re adding you can write your own. These should be modeled after &lt;computeroutput&gt;FindBrigand&lt;/computeroutput&gt; or &lt;computeroutput&gt;FindCatch&lt;/computeroutput&gt; for header-only libraries, and &lt;computeroutput&gt;FindYAMLCPP&lt;/computeroutput&gt; for compiled libraries. The &lt;computeroutput&gt;SetupDEPENDENCY.cmake&lt;/computeroutput&gt; file must then be included in the root &lt;computeroutput&gt;spectre/CMakeLists.txt&lt;/computeroutput&gt;. Be sure to test both that setting &lt;computeroutput&gt;LIBRARY_ROOT&lt;/computeroutput&gt; works correctly for your library, and also that if the library is required that CMake fails gracefully if the library is not found.&lt;/para&gt;</a>
<a name="66"><span class="lineNum">      66 </span>            : &lt;/sect2&gt;</a>
<a name="67"><span class="lineNum">      67 </span>            : &lt;sect2 id=&quot;spectre_build_system_1common_cmake_flags&quot;&gt;</a>
<a name="68"><span class="lineNum">      68 </span>            : &lt;title&gt;Commonly Used CMake flags&lt;/title&gt;</a>
<a name="69"><span class="lineNum">      69 </span>            : &lt;para&gt;The following are the most common flags used to control building with &lt;computeroutput&gt;CMake&lt;/computeroutput&gt;. They are used by &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;cmake&lt;sp/&gt;-D&lt;sp/&gt;FLAG1=OPT1&lt;sp/&gt;...&lt;sp/&gt;-D&lt;sp/&gt;FLAGN=OPTN&lt;sp/&gt;&amp;lt;SPECTRE_ROOT&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="70"><span class="lineNum">      70 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="71"><span class="lineNum">      71 </span>            : &lt;para&gt;&lt;itemizedlist&gt;</a>
<a name="72"><span class="lineNum">      72 </span>            : &lt;listitem&gt;&lt;para&gt;ASAN&lt;itemizedlist&gt;</a>
<a name="73"><span class="lineNum">      73 </span>            : &lt;listitem&gt;&lt;para&gt;Whether or not to turn on the address sanitizer compile flags (&lt;computeroutput&gt;-fsanitize=address&lt;/computeroutput&gt;) (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="74"><span class="lineNum">      74 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="75"><span class="lineNum">      75 </span>            : &lt;/para&gt;</a>
<a name="76"><span class="lineNum">      76 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;BUILD_PYTHON_BINDINGS&lt;itemizedlist&gt;</a>
<a name="77"><span class="lineNum">      77 </span>            : &lt;listitem&gt;&lt;para&gt;Build python libraries to call SpECTRE C++ code from python (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="78"><span class="lineNum">      78 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="79"><span class="lineNum">      79 </span>            : &lt;/para&gt;</a>
<a name="80"><span class="lineNum">      80 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;BUILD_SHARED_LIBS&lt;itemizedlist&gt;</a>
<a name="81"><span class="lineNum">      81 </span>            : &lt;listitem&gt;&lt;para&gt;Whether shared libraries are built instead of static libraries (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="82"><span class="lineNum">      82 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="83"><span class="lineNum">      83 </span>            : &lt;/para&gt;</a>
<a name="84"><span class="lineNum">      84 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;CHARM_ROOT&lt;itemizedlist&gt;</a>
<a name="85"><span class="lineNum">      85 </span>            : &lt;listitem&gt;&lt;para&gt;The path to the build directory of &lt;computeroutput&gt;Charm++&lt;/computeroutput&gt;&lt;/para&gt;</a>
<a name="86"><span class="lineNum">      86 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="87"><span class="lineNum">      87 </span>            : &lt;/para&gt;</a>
<a name="88"><span class="lineNum">      88 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;CMAKE_BUILD_TYPE&lt;itemizedlist&gt;</a>
<a name="89"><span class="lineNum">      89 </span>            : &lt;listitem&gt;&lt;para&gt;Sets the build type. Common options:&lt;itemizedlist&gt;</a>
<a name="90"><span class="lineNum">      90 </span>            : &lt;listitem&gt;&lt;para&gt;&lt;computeroutput&gt;Debug&lt;/computeroutput&gt; (the default if the flag is not specified): sets flags that trigger additional error checking&lt;/para&gt;</a>
<a name="91"><span class="lineNum">      91 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;computeroutput&gt;Release&lt;/computeroutput&gt;&lt;/para&gt;</a>
<a name="92"><span class="lineNum">      92 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="93"><span class="lineNum">      93 </span>            : &lt;/para&gt;</a>
<a name="94"><span class="lineNum">      94 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="95"><span class="lineNum">      95 </span>            : &lt;/para&gt;</a>
<a name="96"><span class="lineNum">      96 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;CMAKE_C_COMPILER&lt;itemizedlist&gt;</a>
<a name="97"><span class="lineNum">      97 </span>            : &lt;listitem&gt;&lt;para&gt;The &lt;computeroutput&gt;C&lt;/computeroutput&gt; compiler used (defaults to whatever is determined by &lt;computeroutput&gt;CMake/Modules/CMakeDetermineCCompiler.cmake&lt;/computeroutput&gt;, usually &lt;computeroutput&gt;cc&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="98"><span class="lineNum">      98 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="99"><span class="lineNum">      99 </span>            : &lt;/para&gt;</a>
<a name="100"><span class="lineNum">     100 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;CMAKE_CXX_COMPILER&lt;itemizedlist&gt;</a>
<a name="101"><span class="lineNum">     101 </span>            : &lt;listitem&gt;&lt;para&gt;The &lt;computeroutput&gt;C++&lt;/computeroutput&gt; compiler used (defaults to whatever is determined by &lt;computeroutput&gt;CMake/Modules/CMakeDetermineCXXCompiler.cmake&lt;/computeroutput&gt;, usually &lt;computeroutput&gt;c++&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="102"><span class="lineNum">     102 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="103"><span class="lineNum">     103 </span>            : &lt;/para&gt;</a>
<a name="104"><span class="lineNum">     104 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;CMAKE_Fortran_COMPILER&lt;itemizedlist&gt;</a>
<a name="105"><span class="lineNum">     105 </span>            : &lt;listitem&gt;&lt;para&gt;The &lt;computeroutput&gt;Fortran&lt;/computeroutput&gt; compiler used (defaults to whatever is determined by &lt;computeroutput&gt;CMake/Modules/CMakeDetermineFortranCompiler.cmake&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="106"><span class="lineNum">     106 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="107"><span class="lineNum">     107 </span>            : &lt;/para&gt;</a>
<a name="108"><span class="lineNum">     108 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;CMAKE_C_FLAGS&lt;itemizedlist&gt;</a>
<a name="109"><span class="lineNum">     109 </span>            : &lt;listitem&gt;&lt;para&gt;Additional flags passed to the &lt;computeroutput&gt;C&lt;/computeroutput&gt; compiler.&lt;/para&gt;</a>
<a name="110"><span class="lineNum">     110 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="111"><span class="lineNum">     111 </span>            : &lt;/para&gt;</a>
<a name="112"><span class="lineNum">     112 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;CMAKE_CXX_FLAGS&lt;itemizedlist&gt;</a>
<a name="113"><span class="lineNum">     113 </span>            : &lt;listitem&gt;&lt;para&gt;Additional flags passed to the &lt;computeroutput&gt;C++&lt;/computeroutput&gt; compiler.&lt;/para&gt;</a>
<a name="114"><span class="lineNum">     114 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="115"><span class="lineNum">     115 </span>            : &lt;/para&gt;</a>
<a name="116"><span class="lineNum">     116 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;CMAKE_Fortran_FLAGS&lt;itemizedlist&gt;</a>
<a name="117"><span class="lineNum">     117 </span>            : &lt;listitem&gt;&lt;para&gt;Additional flags passed to the &lt;computeroutput&gt;Fortran&lt;/computeroutput&gt; compiler.&lt;/para&gt;</a>
<a name="118"><span class="lineNum">     118 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="119"><span class="lineNum">     119 </span>            : &lt;/para&gt;</a>
<a name="120"><span class="lineNum">     120 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;CMAKE_RUNTIME_OUTPUT_DIRECTORY&lt;itemizedlist&gt;</a>
<a name="121"><span class="lineNum">     121 </span>            : &lt;listitem&gt;&lt;para&gt;Sets the directory where the library and executables are placed. By default libraries end up in &lt;computeroutput&gt;&amp;lt;BUILD_DIR&amp;gt;/lib&lt;/computeroutput&gt; and executables in &lt;computeroutput&gt;&amp;lt;BUILD_DIR&amp;gt;/bin&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="122"><span class="lineNum">     122 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="123"><span class="lineNum">     123 </span>            : &lt;/para&gt;</a>
<a name="124"><span class="lineNum">     124 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;DEBUG_SYMBOLS&lt;itemizedlist&gt;</a>
<a name="125"><span class="lineNum">     125 </span>            : &lt;listitem&gt;&lt;para&gt;Whether or not to use debug symbols (default is &lt;computeroutput&gt;ON&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="126"><span class="lineNum">     126 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Disabling debug symbols will reduce compile time and total size of the build directory.&lt;/para&gt;</a>
<a name="127"><span class="lineNum">     127 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="128"><span class="lineNum">     128 </span>            : &lt;/para&gt;</a>
<a name="129"><span class="lineNum">     129 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;ENABLE_PROFILING&lt;itemizedlist&gt;</a>
<a name="130"><span class="lineNum">     130 </span>            : &lt;listitem&gt;&lt;para&gt;Enables various options to make profiling SpECTRE easier (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="131"><span class="lineNum">     131 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="132"><span class="lineNum">     132 </span>            : &lt;/para&gt;</a>
<a name="133"><span class="lineNum">     133 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;ENABLE_WARNINGS&lt;itemizedlist&gt;</a>
<a name="134"><span class="lineNum">     134 </span>            : &lt;listitem&gt;&lt;para&gt;Whether or not warning flags are enabled (default is &lt;computeroutput&gt;ON&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="135"><span class="lineNum">     135 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="136"><span class="lineNum">     136 </span>            : &lt;/para&gt;</a>
<a name="137"><span class="lineNum">     137 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;KEEP_FRAME_POINTER&lt;itemizedlist&gt;</a>
<a name="138"><span class="lineNum">     138 </span>            : &lt;listitem&gt;&lt;para&gt;Whether to keep the frame pointer. Needed for profiling or other cases where you need to be able to figure out what the call stack is. (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="139"><span class="lineNum">     139 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="140"><span class="lineNum">     140 </span>            : &lt;/para&gt;</a>
<a name="141"><span class="lineNum">     141 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;MEMORY_ALLOCATOR&lt;itemizedlist&gt;</a>
<a name="142"><span class="lineNum">     142 </span>            : &lt;listitem&gt;&lt;para&gt;Set which memory allocator to use. If there are unexplained segfaults or other memory issues, it would be worth setting &lt;computeroutput&gt;MEMORY_ALLOCATOR=SYSTEM&lt;/computeroutput&gt; to see if that resolves the issue. It could be the case that different third-party libraries accidentally end up using different allocators, which is undefined behavior and will result in complete chaos. (default is &lt;computeroutput&gt;JEMALLOC&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="143"><span class="lineNum">     143 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="144"><span class="lineNum">     144 </span>            : &lt;/para&gt;</a>
<a name="145"><span class="lineNum">     145 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;SPECTRE_UNIT_TEST_TIMEOUT_FACTOR, SPECTRE_INPUT_FILE_TEST_TIMEOUT_FACTOR and SPECTRE_PYTHON_TEST_TIMEOUT_FACTOR&lt;itemizedlist&gt;</a>
<a name="146"><span class="lineNum">     146 </span>            : &lt;listitem&gt;&lt;para&gt;Multiply the timeout for the respective set of tests by this factor (default is &lt;computeroutput&gt;1&lt;/computeroutput&gt;).&lt;/para&gt;</a>
<a name="147"><span class="lineNum">     147 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;This is useful to run tests on slower machines.&lt;/para&gt;</a>
<a name="148"><span class="lineNum">     148 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="149"><span class="lineNum">     149 </span>            : &lt;/para&gt;</a>
<a name="150"><span class="lineNum">     150 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;STRIP_SYMBOLS&lt;itemizedlist&gt;</a>
<a name="151"><span class="lineNum">     151 </span>            : &lt;listitem&gt;&lt;para&gt;Whether or not to strip all symbols (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="152"><span class="lineNum">     152 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;If enabled strips all extraneous symbols from libraries and executables, further reducing the size of them.&lt;/para&gt;</a>
<a name="153"><span class="lineNum">     153 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="154"><span class="lineNum">     154 </span>            : &lt;/para&gt;</a>
<a name="155"><span class="lineNum">     155 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;STUB_EXECUTABLE_OBJECT_FILES&lt;itemizedlist&gt;</a>
<a name="156"><span class="lineNum">     156 </span>            : &lt;listitem&gt;&lt;para&gt;Replace object files from executables after linking with empty stubs (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="157"><span class="lineNum">     157 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;This is useful for drastically reducing the build size in CI, but since the object files are replaced with empty stubs will generally cause linking problems if used during development.&lt;/para&gt;</a>
<a name="158"><span class="lineNum">     158 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="159"><span class="lineNum">     159 </span>            : &lt;/para&gt;</a>
<a name="160"><span class="lineNum">     160 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;STUB_LIBRARY_OBJECT_FILES&lt;itemizedlist&gt;</a>
<a name="161"><span class="lineNum">     161 </span>            : &lt;listitem&gt;&lt;para&gt;Replace object files from libraries after linking with empty stubs (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="162"><span class="lineNum">     162 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;This is useful for drastically reducing the build size in CI, but since the object files are replaced with empty stubs will generally cause linking problems if used during development.&lt;/para&gt;</a>
<a name="163"><span class="lineNum">     163 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="164"><span class="lineNum">     164 </span>            : &lt;/para&gt;</a>
<a name="165"><span class="lineNum">     165 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;UBSAN_INTEGER&lt;itemizedlist&gt;</a>
<a name="166"><span class="lineNum">     166 </span>            : &lt;listitem&gt;&lt;para&gt;Whether or not to turn on the undefined behavior sanitizer &lt;ulink url=&quot;https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html&quot;&gt;unsigned integer overflow&lt;/ulink&gt; flag (&lt;computeroutput&gt;-fsanitize=integer&lt;/computeroutput&gt;) (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="167"><span class="lineNum">     167 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="168"><span class="lineNum">     168 </span>            : &lt;/para&gt;</a>
<a name="169"><span class="lineNum">     169 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;UBSAN_UNDEFINED&lt;itemizedlist&gt;</a>
<a name="170"><span class="lineNum">     170 </span>            : &lt;listitem&gt;&lt;para&gt;Whether or not to turn on the undefined behavior sanitizer &lt;ulink url=&quot;https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html&quot;&gt;undefined behavior&lt;/ulink&gt; compile flags (&lt;computeroutput&gt;-fsanitize=undefined&lt;/computeroutput&gt;) (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="171"><span class="lineNum">     171 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="172"><span class="lineNum">     172 </span>            : &lt;/para&gt;</a>
<a name="173"><span class="lineNum">     173 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;UNIT_TESTS_IN_TEST_EXECUTABLES&lt;itemizedlist&gt;</a>
<a name="174"><span class="lineNum">     174 </span>            : &lt;listitem&gt;&lt;para&gt;Whether to build the &lt;computeroutput&gt;unit-tests&lt;/computeroutput&gt; target as part of the &lt;computeroutput&gt;test-executables&lt;/computeroutput&gt; target. This is used to build only the non-unit tests in the CI build that doesn&amp;apos;t use the PCH. (default is &lt;computeroutput&gt;ON&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="175"><span class="lineNum">     175 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="176"><span class="lineNum">     176 </span>            : &lt;/para&gt;</a>
<a name="177"><span class="lineNum">     177 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;USE_CCACHE&lt;itemizedlist&gt;</a>
<a name="178"><span class="lineNum">     178 </span>            : &lt;listitem&gt;&lt;para&gt;Use ccache to cache build output so that rebuilding parts of the source tree is faster. The cache will use up space on disk, with the default being around 2-5GB. If you are performing a one time build to test something specific you should consider disabling ccache in order to avoid removing cached files that may be useful in other builds. (default is &lt;computeroutput&gt;ON&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="179"><span class="lineNum">     179 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="180"><span class="lineNum">     180 </span>            : &lt;/para&gt;</a>
<a name="181"><span class="lineNum">     181 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;USE_FORMALINE&lt;itemizedlist&gt;</a>
<a name="182"><span class="lineNum">     182 </span>            : &lt;listitem&gt;&lt;para&gt;Write the source tree into HDF5 files written to disk in order to increase reproducibility of results. (default is &lt;computeroutput&gt;ON&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="183"><span class="lineNum">     183 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="184"><span class="lineNum">     184 </span>            : &lt;/para&gt;</a>
<a name="185"><span class="lineNum">     185 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;USE_GIT_HOOKS&lt;itemizedlist&gt;</a>
<a name="186"><span class="lineNum">     186 </span>            : &lt;listitem&gt;&lt;para&gt;Use git hooks to perform certain sanity checks so that small goofs are caught before getting to CI. Most situations where the hooks can cause problems are handled automatically. The exception is when the build directory is inside a (Singularity) container, we use Python 2 and the host machine (where we make the commits) does not have Python 2. Except for these types of cases, we strongly encourage you to keep the hooks enabled since the same checks are performed during CI and there is a good reason why the checks exist in the first place. (default is &lt;computeroutput&gt;ON&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="187"><span class="lineNum">     187 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="188"><span class="lineNum">     188 </span>            : &lt;/para&gt;</a>
<a name="189"><span class="lineNum">     189 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;USE_LD&lt;itemizedlist&gt;</a>
<a name="190"><span class="lineNum">     190 </span>            : &lt;listitem&gt;&lt;para&gt;Override the automatically chosen linker. The options are &lt;computeroutput&gt;ld&lt;/computeroutput&gt;, &lt;computeroutput&gt;gold&lt;/computeroutput&gt;, and &lt;computeroutput&gt;lld&lt;/computeroutput&gt;. (default is &lt;computeroutput&gt;OFF&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="191"><span class="lineNum">     191 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="192"><span class="lineNum">     192 </span>            : &lt;/para&gt;</a>
<a name="193"><span class="lineNum">     193 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;USE_PCH&lt;itemizedlist&gt;</a>
<a name="194"><span class="lineNum">     194 </span>            : &lt;listitem&gt;&lt;para&gt;Whether or not to use pre-compiled headers (default is &lt;computeroutput&gt;ON&lt;/computeroutput&gt;)&lt;/para&gt;</a>
<a name="195"><span class="lineNum">     195 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;This needs to be turned &lt;computeroutput&gt;OFF&lt;/computeroutput&gt; in order to use &lt;ulink url=&quot;https://github.com/include-what-you-use/include-what-you-use&quot;&gt;include-what-you-use (IWYU)&lt;/ulink&gt;&lt;/para&gt;</a>
<a name="196"><span class="lineNum">     196 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="197"><span class="lineNum">     197 </span>            : &lt;/para&gt;</a>
<a name="198"><span class="lineNum">     198 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="199"><span class="lineNum">     199 </span>            : &lt;/para&gt;</a>
<a name="200"><span class="lineNum">     200 </span>            : &lt;/sect2&gt;</a>
<a name="201"><span class="lineNum">     201 </span>            : &lt;sect2 id=&quot;spectre_build_system_1autotoc_md63&quot;&gt;</a>
<a name="202"><span class="lineNum">     202 </span>            : &lt;title&gt;Checking Dependencies&lt;/title&gt;</a>
<a name="203"><span class="lineNum">     203 </span>            : &lt;para&gt;Getting dependencies of libraries correct is quite difficult. SpECTRE offers the CMake function &lt;computeroutput&gt;check_spectre_libs_dependencies&lt;/computeroutput&gt;, defined in &lt;computeroutput&gt;cmake/SpectreCheckDependencies.cmake&lt;/computeroutput&gt;, to check the dependencies for all libraries in the &lt;computeroutput&gt;libs&lt;/computeroutput&gt; target. Individual target dependencies can be checked using the &lt;computeroutput&gt;check_target_dependencies&lt;/computeroutput&gt; CMake function defined in &lt;computeroutput&gt;cmake/SpectreCheckTargetDependencies.cmake&lt;/computeroutput&gt;. Please see those functions in the source tree for more details on how to use them.&lt;/para&gt;</a>
<a name="204"><span class="lineNum">     204 </span>            : &lt;/sect2&gt;</a>
<a name="205"><span class="lineNum">     205 </span>            : &lt;sect2 id=&quot;spectre_build_system_1autotoc_md64&quot;&gt;</a>
<a name="206"><span class="lineNum">     206 </span>            : &lt;title&gt;Formaline&lt;/title&gt;</a>
<a name="207"><span class="lineNum">     207 </span>            : &lt;para&gt;SpECTRE&amp;apos;s implementation of Formaline is based on, but distinct in implementation from, the original design by &lt;ulink url=&quot;https://github.com/hypercott/formaline&quot;&gt;Erik Schnetter and Christian Ott&lt;/ulink&gt;, which embeds an archive of the source tree into the executable. The original design creates a C/C++ file with a function that returns an array/vector of &lt;computeroutput&gt;char&lt;/computeroutput&gt;s (a byte stream). However, this results in a very large source file (50MB or more), which is very slow to compile and ends up more than doubling the link time. Instead, SpECTRE&amp;apos;s Formaline implementation uses the linker &lt;computeroutput&gt;ld&lt;/computeroutput&gt; to encode a file into an object, which means rather than creating a large source file, we can directly encode the source tree archive into the binary at the linking stage.&lt;/para&gt;</a>
<a name="208"><span class="lineNum">     208 </span>            : &lt;para&gt;Most of SpECTRE&amp;apos;s Formaline is implemented inside the &lt;computeroutput&gt;tools/WrapExecutableLinker.sh&lt;/computeroutput&gt; script. Function declarations are provided in &lt;computeroutput&gt;&lt;ref refid=&quot;Formaline_8hpp_source&quot; kindref=&quot;compound&quot;&gt;Utilities/Formaline.hpp&lt;/ref&gt;&lt;/computeroutput&gt; and a small function that writes the source file to disk is defined in &lt;computeroutput&gt;Utilities/Formaline.cpp&lt;/computeroutput&gt;. The first Formaline-related thing done in &lt;computeroutput&gt;WrapExecutableLinker.sh&lt;/computeroutput&gt; is to archive everything in the source directory tracked by git. Once the archive is created we run &lt;computeroutput&gt;ld -r -b binary -o object.o src.tar.gz&lt;/computeroutput&gt; (with unique names for &lt;computeroutput&gt;object.o&lt;/computeroutput&gt; and &lt;computeroutput&gt;src.tar.gz&lt;/computeroutput&gt; for each executable that is built to avoid name collisions) to generate an object file with the source file encoded from &lt;computeroutput&gt;_binary_src_tar_gz_start&lt;/computeroutput&gt; to &lt;computeroutput&gt;_binary_src_tar_gz_end&lt;/computeroutput&gt;. Next we write a C++ source file that defines a function &lt;computeroutput&gt;get_archive&lt;/computeroutput&gt; to convert the byte stream into a &lt;computeroutput&gt;&lt;ref refid=&quot;cpp/container/vector&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::vector&lt;/ref&gt;&amp;lt;char&amp;gt;&lt;/computeroutput&gt;. We also encode the output of &lt;computeroutput&gt;printenv&lt;/computeroutput&gt;, the various &lt;computeroutput&gt;PATH&lt;/computeroutput&gt; environment variables, and the CMake generated &lt;computeroutput&gt;LibraryVersions.txt&lt;/computeroutput&gt; file into the source file. Finally, the generated source file is built during the linking phase and the object file containing the source archive is linked into the executable.&lt;/para&gt;</a>
<a name="209"><span class="lineNum">     209 </span>            : &lt;para&gt;To further aid in reproducibility, the &lt;computeroutput&gt;printenv&lt;/computeroutput&gt; output and &lt;computeroutput&gt;LibraryVersions.txt&lt;/computeroutput&gt; contents are written to HDF5 files as part of the &lt;computeroutput&gt;&lt;ref refid=&quot;classh5_1_1Header&quot; kindref=&quot;compound&quot;&gt;h5::Header&lt;/ref&gt;&lt;/computeroutput&gt; object. The archive of the source tree is written using the &lt;computeroutput&gt;&lt;ref refid=&quot;classh5_1_1SourceArchive&quot; kindref=&quot;compound&quot;&gt;h5::SourceArchive&lt;/ref&gt;&lt;/computeroutput&gt; object and can be extracted by running &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;h5dump&lt;sp/&gt;-d&lt;sp/&gt;/src.tar.gz&lt;sp/&gt;-b&lt;sp/&gt;LE&lt;sp/&gt;-o&lt;sp/&gt;src.tar.gz&lt;sp/&gt;/path/to/hdf5/file.h5&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="210"><span class="lineNum">     210 </span>            : &lt;/programlisting&gt; &lt;/para&gt;</a>
<a name="211"><span class="lineNum">     211 </span>            : &lt;/sect2&gt;</a>
<a name="212"><span class="lineNum">     212 </span>            : &lt;/sect1&gt;</a>
<a name="213"><span class="lineNum">     213 </span>            :     &lt;/detaileddescription&gt;</a>
<a name="214"><span class="lineNum">     214 </span>            :   &lt;/compounddef&gt;</a>
<a name="215"><span class="lineNum">     215 </span>            : &lt;/doxygen&gt;</a>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.14</a></td></tr>
  </table>
  <br>

</body>
</html>
