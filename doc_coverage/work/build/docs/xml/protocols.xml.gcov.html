<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - 102d152bb208d020115bc267fd9f132d57025466 - /work/build/docs/xml/protocols.xml</title>
  <link rel="stylesheet" type="text/css" href="../../../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title"> SpECTRE Documentation Coverage Report</td></tr>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../../../index.html">top level</a> - <a href="index.html">work/build/docs/xml</a> - protocols.xml</td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
             <td class="headerItem">Commit:</td>
             <td class="headerValue"><a target="_blank" href="https://github.com/sxs-collaboration/spectre/commit/102d152bb208d020115bc267fd9f132d57025466">102d152bb208d020115bc267fd9f132d57025466</a></td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2021-01-05 20:09:09</td>
            <td></td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span><span class="lineCov">          1 : &lt;?xml version='1.0' encoding='UTF-8' standalone='no'?&gt;</span></a>
<a name="2"><span class="lineNum">       2 </span>            : &lt;doxygen xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;compound.xsd&quot; version=&quot;1.8.17&quot;&gt;</a>
<a name="3"><span class="lineNum">       3 </span>            :   &lt;compounddef id=&quot;protocols&quot; kind=&quot;page&quot;&gt;</a>
<a name="4"><span class="lineNum">       4 </span>            :     &lt;compoundname&gt;protocols&lt;/compoundname&gt;</a>
<a name="5"><span class="lineNum">       5 </span>            :     &lt;title&gt;Protocols&lt;/title&gt;</a>
<a name="6"><span class="lineNum">       6 </span>            :     &lt;tableofcontents&gt;</a>
<a name="7"><span class="lineNum">       7 </span>            :       &lt;tocsect&gt;</a>
<a name="8"><span class="lineNum">       8 </span>            :         &lt;name&gt;Overview of protocols&lt;/name&gt;</a>
<a name="9"><span class="lineNum">       9 </span>            :         &lt;reference&gt;protocols_1protocols_overview&lt;/reference&gt;</a>
<a name="10"><span class="lineNum">      10 </span>            :     &lt;/tocsect&gt;</a>
<a name="11"><span class="lineNum">      11 </span>            :       &lt;tocsect&gt;</a>
<a name="12"><span class="lineNum">      12 </span>            :         &lt;name&gt;Protocol users: Conforming to a protocol&lt;/name&gt;</a>
<a name="13"><span class="lineNum">      13 </span>            :         &lt;reference&gt;protocols_1protocols_conforming&lt;/reference&gt;</a>
<a name="14"><span class="lineNum">      14 </span>            :     &lt;/tocsect&gt;</a>
<a name="15"><span class="lineNum">      15 </span>            :       &lt;tocsect&gt;</a>
<a name="16"><span class="lineNum">      16 </span>            :         &lt;name&gt;Protocol authors: Writing a protocol&lt;/name&gt;</a>
<a name="17"><span class="lineNum">      17 </span>            :         &lt;reference&gt;protocols_1protocols_author&lt;/reference&gt;</a>
<a name="18"><span class="lineNum">      18 </span>            :     &lt;/tocsect&gt;</a>
<a name="19"><span class="lineNum">      19 </span>            :       &lt;tocsect&gt;</a>
<a name="20"><span class="lineNum">      20 </span>            :         &lt;name&gt;Protocol authors: Testing a protocol&lt;/name&gt;</a>
<a name="21"><span class="lineNum">      21 </span>            :         &lt;reference&gt;protocols_1protocols_testing&lt;/reference&gt;</a>
<a name="22"><span class="lineNum">      22 </span>            :     &lt;/tocsect&gt;</a>
<a name="23"><span class="lineNum">      23 </span>            :       &lt;tocsect&gt;</a>
<a name="24"><span class="lineNum">      24 </span>            :         &lt;name&gt;Protocols and C++20 &amp;quot;Constraints and concepts&amp;quot;&lt;/name&gt;</a>
<a name="25"><span class="lineNum">      25 </span>            :         &lt;reference&gt;protocols_1protocols_and_constraints&lt;/reference&gt;</a>
<a name="26"><span class="lineNum">      26 </span>            :     &lt;/tocsect&gt;</a>
<a name="27"><span class="lineNum">      27 </span>            :     &lt;/tableofcontents&gt;</a>
<a name="28"><span class="lineNum">      28 </span>            :     &lt;briefdescription&gt;</a>
<a name="29"><span class="lineNum">      29 </span>            :     &lt;/briefdescription&gt;</a>
<a name="30"><span class="lineNum">      30 </span>            :     &lt;detaileddescription&gt;</a>
<a name="31"><span class="lineNum">      31 </span>            : &lt;sect1 id=&quot;protocols_1protocols_overview&quot;&gt;</a>
<a name="32"><span class="lineNum">      32 </span>            : &lt;title&gt;Overview of protocols&lt;/title&gt;</a>
<a name="33"><span class="lineNum">      33 </span>            : &lt;para&gt;Protocols are a concept we use in SpECTRE to define metaprogramming interfaces. A variation of this concept is built into many languages, so this is a quote from the &lt;ulink url=&quot;https://docs.swift.org/swift-book/LanguageGuide/Protocols.html&quot;&gt;Swift documentation&lt;/ulink&gt;:&lt;/para&gt;</a>
<a name="34"><span class="lineNum">      34 </span>            : &lt;para&gt;&lt;blockquote&gt;&lt;para&gt;A protocol defines a blueprint of methods, properties, and other requirements that suit a particular task or piece of functionality. The protocol can then be adopted by a class, structure, or enumeration to provide an actual implementation of those requirements. Any type that satisfies the requirements of a protocol is said to conform to that protocol. &lt;/para&gt;</a>
<a name="35"><span class="lineNum">      35 </span>            : &lt;/blockquote&gt;&lt;/para&gt;</a>
<a name="36"><span class="lineNum">      36 </span>            : &lt;para&gt;You should define a protocol when you need a template parameter to conform to an interface. Here is an example of a protocol that is adapted from the &lt;ulink url=&quot;https://docs.swift.org/swift-book/LanguageGuide/Protocols.html&quot;&gt;Swift documentation&lt;/ulink&gt;:&lt;/para&gt;</a>
<a name="37"><span class="lineNum">      37 </span>            : &lt;para&gt;&lt;programlisting filename=&quot;Utilities/Test_ProtocolHelpers.cpp&quot;&gt;&lt;codeline&gt;&lt;highlight class=&quot;keyword&quot;&gt;namespace&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;protocols&lt;sp/&gt;{&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="38"><span class="lineNum">      38 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;comment&quot;&gt;/*!&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="39"><span class="lineNum">      39 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;comment&quot;&gt;&lt;sp/&gt;*&lt;sp/&gt;\brief&lt;sp/&gt;Has&lt;sp/&gt;a&lt;sp/&gt;name.&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="40"><span class="lineNum">      40 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;comment&quot;&gt;&lt;sp/&gt;*&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="41"><span class="lineNum">      41 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;comment&quot;&gt;&lt;sp/&gt;*&lt;sp/&gt;Requires&lt;sp/&gt;the&lt;sp/&gt;class&lt;sp/&gt;has&lt;sp/&gt;these&lt;sp/&gt;member&lt;sp/&gt;functions:&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="42"><span class="lineNum">      42 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;comment&quot;&gt;&lt;sp/&gt;*&lt;sp/&gt;-&lt;sp/&gt;`name`:&lt;sp/&gt;Returns&lt;sp/&gt;the&lt;sp/&gt;name&lt;sp/&gt;of&lt;sp/&gt;the&lt;sp/&gt;object&lt;sp/&gt;as&lt;sp/&gt;a&lt;sp/&gt;`std::string`.&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="43"><span class="lineNum">      43 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;comment&quot;&gt;&lt;sp/&gt;*/&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="44"><span class="lineNum">      44 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;struct&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;Named&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="45"><span class="lineNum">      45 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;template&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&amp;lt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;typename&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;ConformingType&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="46"><span class="lineNum">      46 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;struct&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;test&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="47"><span class="lineNum">      47 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Try&lt;sp/&gt;calling&lt;sp/&gt;the&lt;sp/&gt;`ConformingType::name`&lt;sp/&gt;member&lt;sp/&gt;function&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="48"><span class="lineNum">      48 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;using&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;name_return_type&lt;sp/&gt;=&lt;sp/&gt;decltype(std::declval&amp;lt;ConformingType&amp;gt;().name());&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="49"><span class="lineNum">      49 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Check&lt;sp/&gt;the&lt;sp/&gt;return&lt;sp/&gt;type&lt;sp/&gt;of&lt;sp/&gt;the&lt;sp/&gt;`name`&lt;sp/&gt;member&lt;sp/&gt;function&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="50"><span class="lineNum">      50 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;static_assert(std::is_same_v&amp;lt;name_return_type,&lt;sp/&gt;std::string&amp;gt;,&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="51"><span class="lineNum">      51 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;stringliteral&quot;&gt;&amp;quot;The&lt;sp/&gt;&amp;apos;name&amp;apos;&lt;sp/&gt;function&lt;sp/&gt;must&lt;sp/&gt;return&lt;sp/&gt;a&lt;sp/&gt;&amp;apos;std::string&amp;apos;.&amp;quot;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;);&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="52"><span class="lineNum">      52 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;};&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="53"><span class="lineNum">      53 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;};&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="54"><span class="lineNum">      54 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;}&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;namespace&lt;sp/&gt;protocols&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="55"><span class="lineNum">      55 </span>            : &lt;/programlisting&gt; The protocol defines an interface that any type that adopts it must implement. For example, the following class conforms to the protocol we just defined:&lt;/para&gt;</a>
<a name="56"><span class="lineNum">      56 </span>            : &lt;para&gt;&lt;programlisting filename=&quot;Utilities/Test_ProtocolHelpers.cpp&quot;&gt;&lt;codeline&gt;&lt;highlight class=&quot;keyword&quot;&gt;class&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;Person&lt;sp/&gt;:&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;public&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;ref refid=&quot;structtt_1_1ConformsTo&quot; kindref=&quot;compound&quot;&gt;tt::ConformsTo&lt;/ref&gt;&amp;lt;protocols::Named&amp;gt;&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="57"><span class="lineNum">      57 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;public&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;:&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="58"><span class="lineNum">      58 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Function&lt;sp/&gt;required&lt;sp/&gt;to&lt;sp/&gt;conform&lt;sp/&gt;to&lt;sp/&gt;the&lt;sp/&gt;protocol&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="59"><span class="lineNum">      59 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;ref refid=&quot;cpp/string/basic_string&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::string&lt;/ref&gt;&lt;sp/&gt;name()&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;&lt;sp/&gt;const&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;{&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keywordflow&quot;&gt;return&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;first_name_&lt;sp/&gt;+&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;stringliteral&quot;&gt;&amp;quot;&lt;sp/&gt;&amp;quot;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;+&lt;sp/&gt;last_name_;&lt;sp/&gt;}&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="60"><span class="lineNum">      60 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="61"><span class="lineNum">      61 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;private&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;:&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="62"><span class="lineNum">      62 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Implementation&lt;sp/&gt;details&lt;sp/&gt;of&lt;sp/&gt;the&lt;sp/&gt;class&lt;sp/&gt;that&lt;sp/&gt;are&lt;sp/&gt;irrelevant&lt;sp/&gt;to&lt;sp/&gt;the&lt;sp/&gt;protocol&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="63"><span class="lineNum">      63 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;ref refid=&quot;cpp/string/basic_string&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::string&lt;/ref&gt;&lt;sp/&gt;first_name_;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="64"><span class="lineNum">      64 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;ref refid=&quot;cpp/string/basic_string&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::string&lt;/ref&gt;&lt;sp/&gt;last_name_;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="65"><span class="lineNum">      65 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="66"><span class="lineNum">      66 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;public&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;:&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="67"><span class="lineNum">      67 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;Person(&lt;ref refid=&quot;cpp/string/basic_string&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::string&lt;/ref&gt;&lt;sp/&gt;first_name,&lt;sp/&gt;&lt;ref refid=&quot;cpp/string/basic_string&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::string&lt;/ref&gt;&lt;sp/&gt;last_name)&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="68"><span class="lineNum">      68 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;:&lt;sp/&gt;first_name_(std::move(first_name)),&lt;sp/&gt;last_name_(std::move(last_name))&lt;sp/&gt;{}&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="69"><span class="lineNum">      69 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;};&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="70"><span class="lineNum">      70 </span>            : &lt;/programlisting&gt; The class indicates it conforms to the protocol by (publicly) inheriting from &lt;computeroutput&gt;&lt;ref refid=&quot;structtt_1_1ConformsTo&quot; kindref=&quot;compound&quot;&gt;tt::ConformsTo&lt;/ref&gt;&amp;lt;TheProtocol&amp;gt;&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="71"><span class="lineNum">      71 </span>            : &lt;para&gt;Once you have defined a protocol, you can check if a class conforms to it using the &lt;computeroutput&gt;tt::assert_conforms_to&lt;/computeroutput&gt; or &lt;computeroutput&gt;&lt;ref refid=&quot;group__ProtocolsGroup_1ga69cadf7e1af796b7b303137ffde2f8ad&quot; kindref=&quot;member&quot;&gt;tt::conforms_to&lt;/ref&gt;&lt;/computeroutput&gt; metafunctions:&lt;/para&gt;</a>
<a name="72"><span class="lineNum">      72 </span>            : &lt;para&gt;&lt;programlisting filename=&quot;Utilities/Test_ProtocolHelpers.cpp&quot;&gt;&lt;codeline&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;SFINAE-friendly&lt;sp/&gt;version:&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="73"><span class="lineNum">      73 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;constexpr&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keywordtype&quot;&gt;bool&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;person_class_is_named&lt;sp/&gt;=&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="74"><span class="lineNum">      74 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;tt::conforms_to_v&amp;lt;Person,&lt;sp/&gt;protocols::Named&amp;gt;;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="75"><span class="lineNum">      75 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Assert-friendly&lt;sp/&gt;version&lt;sp/&gt;with&lt;sp/&gt;more&lt;sp/&gt;diagnostics:&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="76"><span class="lineNum">      76 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;static_assert(tt::assert_conforms_to&amp;lt;Person,&lt;sp/&gt;protocols::Named&amp;gt;);&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="77"><span class="lineNum">      77 </span>            : &lt;/programlisting&gt; Note that checking for protocol conformance is cheap, so you may freely use protocol conformance checks in your code.&lt;/para&gt;</a>
<a name="78"><span class="lineNum">      78 </span>            : &lt;para&gt;This is how you can write code that relies on the interface defined by the protocol:&lt;/para&gt;</a>
<a name="79"><span class="lineNum">      79 </span>            : &lt;para&gt;&lt;programlisting filename=&quot;Utilities/Test_ProtocolHelpers.cpp&quot;&gt;&lt;codeline&gt;&lt;highlight class=&quot;keyword&quot;&gt;template&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&amp;lt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;typename&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;NamedThing&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="80"><span class="lineNum">      80 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;ref refid=&quot;cpp/string/basic_string&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::string&lt;/ref&gt;&lt;sp/&gt;greet(&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;const&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;NamedThing&amp;amp;&lt;sp/&gt;named_thing)&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="81"><span class="lineNum">      81 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Make&lt;sp/&gt;sure&lt;sp/&gt;the&lt;sp/&gt;template&lt;sp/&gt;parameter&lt;sp/&gt;conforms&lt;sp/&gt;to&lt;sp/&gt;the&lt;sp/&gt;protocol&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="82"><span class="lineNum">      82 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;static_assert(tt::assert_conforms_to&amp;lt;NamedThing,&lt;sp/&gt;protocols::Named&amp;gt;);&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="83"><span class="lineNum">      83 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Now&lt;sp/&gt;we&lt;sp/&gt;can&lt;sp/&gt;rely&lt;sp/&gt;on&lt;sp/&gt;the&lt;sp/&gt;interface&lt;sp/&gt;that&lt;sp/&gt;the&lt;sp/&gt;protocol&lt;sp/&gt;defines&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="84"><span class="lineNum">      84 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keywordflow&quot;&gt;return&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;stringliteral&quot;&gt;&amp;quot;Hello,&lt;sp/&gt;&amp;quot;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;+&lt;sp/&gt;named_thing.name()&lt;sp/&gt;+&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;stringliteral&quot;&gt;&amp;quot;!&amp;quot;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="85"><span class="lineNum">      85 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;}&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="86"><span class="lineNum">      86 </span>            : &lt;/programlisting&gt; Checking for protocol conformance here makes it clear that we are expecting a template parameter that exposes the particular interface we have defined in the protocol. Therefore, the author of the protocol and of the code that uses it has explicitly defined (and documented!) the interface they expect. And the developer who consumes the protocol by writing classes that conform to it knows exactly what needs to be implemented.&lt;/para&gt;</a>
<a name="87"><span class="lineNum">      87 </span>            : &lt;para&gt;Note that the &lt;computeroutput&gt;&lt;ref refid=&quot;group__ProtocolsGroup_1ga69cadf7e1af796b7b303137ffde2f8ad&quot; kindref=&quot;member&quot;&gt;tt::conforms_to&lt;/ref&gt;&lt;/computeroutput&gt; metafunction is SFINAE-friendly, so you can use it like this:&lt;/para&gt;</a>
<a name="88"><span class="lineNum">      88 </span>            : &lt;para&gt;&lt;programlisting filename=&quot;Utilities/Test_ProtocolHelpers.cpp&quot;&gt;&lt;codeline&gt;&lt;highlight class=&quot;keyword&quot;&gt;template&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&amp;lt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;typename&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;Thing,&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="89"><span class="lineNum">      89 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;ref refid=&quot;group__UtilitiesGroup_1ga084d535585c18d4e80f8ec6052d341a3&quot; kindref=&quot;member&quot;&gt;Requires&amp;lt;not tt::conforms_to_v&amp;lt;Thing, protocols::Named&amp;gt;&lt;/ref&gt;&amp;gt;&lt;sp/&gt;=&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;nullptr&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="90"><span class="lineNum">      90 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;ref refid=&quot;cpp/string/basic_string&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::string&lt;/ref&gt;&lt;sp/&gt;greet_anything(&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;const&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;Thing&amp;amp;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;/*anything*/&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;)&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="91"><span class="lineNum">      91 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keywordflow&quot;&gt;return&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;stringliteral&quot;&gt;&amp;quot;Hello!&amp;quot;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="92"><span class="lineNum">      92 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;}&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="93"><span class="lineNum">      93 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;template&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&amp;lt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;typename&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;NamedThing,&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="94"><span class="lineNum">      94 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;ref refid=&quot;group__UtilitiesGroup_1ga084d535585c18d4e80f8ec6052d341a3&quot; kindref=&quot;member&quot;&gt;Requires&amp;lt;tt::conforms_to_v&amp;lt;NamedThing, protocols::Named&amp;gt;&lt;/ref&gt;&amp;gt;&lt;sp/&gt;=&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;nullptr&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="95"><span class="lineNum">      95 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;ref refid=&quot;cpp/string/basic_string&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::string&lt;/ref&gt;&lt;sp/&gt;greet_anything(&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;const&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;NamedThing&amp;amp;&lt;sp/&gt;named_thing)&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="96"><span class="lineNum">      96 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keywordflow&quot;&gt;return&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;greet(named_thing);&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="97"><span class="lineNum">      97 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;}&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="98"><span class="lineNum">      98 </span>            : &lt;/programlisting&gt; The &lt;computeroutput&gt;&lt;ref refid=&quot;group__ProtocolsGroup_1ga69cadf7e1af796b7b303137ffde2f8ad&quot; kindref=&quot;member&quot;&gt;tt::conforms_to&lt;/ref&gt;&lt;/computeroutput&gt; metafunction only checks if the class &lt;emphasis&gt;indicates&lt;/emphasis&gt; it conforms to the protocol. Where SFINAE-friendliness is not necessary prefer the &lt;computeroutput&gt;tt::assert_conforms_to&lt;/computeroutput&gt; metafunction that triggers static asserts with diagnostic messages to understand why the class does not conform to the protocol.&lt;/para&gt;</a>
<a name="99"><span class="lineNum">      99 </span>            : &lt;para&gt;We typically define protocols in a file named &lt;computeroutput&gt;Protocols.hpp&lt;/computeroutput&gt; and within a &lt;computeroutput&gt;protocols&lt;/computeroutput&gt; namespace, similar to how we write &lt;ref refid=&quot;group__DataBoxTagsGroup&quot; kindref=&quot;compound&quot;&gt;tags&lt;/ref&gt; in a &lt;computeroutput&gt;Tags.hpp&lt;/computeroutput&gt; file and within a &lt;computeroutput&gt;Tags&lt;/computeroutput&gt; namespace. The file should be placed in the directory associated with the code that depends on classes conforming to the protocols. For example, the protocol &lt;computeroutput&gt;Named&lt;/computeroutput&gt; in the example above would be placed in directory that also has the &lt;computeroutput&gt;greet&lt;/computeroutput&gt; function.&lt;/para&gt;</a>
<a name="100"><span class="lineNum">     100 </span>            : &lt;/sect1&gt;</a>
<a name="101"><span class="lineNum">     101 </span>            : &lt;sect1 id=&quot;protocols_1protocols_conforming&quot;&gt;</a>
<a name="102"><span class="lineNum">     102 </span>            : &lt;title&gt;Protocol users: Conforming to a protocol&lt;/title&gt;</a>
<a name="103"><span class="lineNum">     103 </span>            : &lt;para&gt;To indicate a class conforms to a protocol it (publicly) inherits from &lt;computeroutput&gt;&lt;ref refid=&quot;structtt_1_1ConformsTo&quot; kindref=&quot;compound&quot;&gt;tt::ConformsTo&lt;/ref&gt;&amp;lt;TheProtocol&amp;gt;&lt;/computeroutput&gt;. The class must fulfill all requirements defined by the protocol. The requirements are listed in the protocol&amp;apos;s documentation.&lt;/para&gt;</a>
<a name="104"><span class="lineNum">     104 </span>            : &lt;para&gt;Any class that indicates it conforms to a protocol must have a unit test to check that it actually does. You can use the &lt;computeroutput&gt;tt::assert_conforms_to&lt;/computeroutput&gt; metafunction for the test:&lt;/para&gt;</a>
<a name="105"><span class="lineNum">     105 </span>            : &lt;para&gt;&lt;programlisting filename=&quot;Utilities/Test_ProtocolHelpers.cpp&quot;&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;static_assert(tt::assert_conforms_to&amp;lt;Person,&lt;sp/&gt;protocols::Named&amp;gt;);&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="106"><span class="lineNum">     106 </span>            : &lt;/programlisting&gt; &lt;/para&gt;</a>
<a name="107"><span class="lineNum">     107 </span>            : &lt;/sect1&gt;</a>
<a name="108"><span class="lineNum">     108 </span>            : &lt;sect1 id=&quot;protocols_1protocols_author&quot;&gt;</a>
<a name="109"><span class="lineNum">     109 </span>            : &lt;title&gt;Protocol authors: Writing a protocol&lt;/title&gt;</a>
<a name="110"><span class="lineNum">     110 </span>            : &lt;para&gt;To author a new protocol you implement a class that provides a &lt;computeroutput&gt;test&lt;/computeroutput&gt; metafunction and detailed documentation. The &lt;computeroutput&gt;test&lt;/computeroutput&gt; metafunction takes a single template parameter (typically named &lt;computeroutput&gt;ConformingType&lt;/computeroutput&gt;) and checks that it conforms to the requirements laid out in the protocol&amp;apos;s documentation. Its purpose is to provide diagnostic messages as compiler errors to understand why a type fails to conform to the protocol. You can use &lt;computeroutput&gt;static_assert&lt;/computeroutput&gt;s or trigger standard compiler errors where appropriate. See the protocols defined above for examples.&lt;/para&gt;</a>
<a name="111"><span class="lineNum">     111 </span>            : &lt;para&gt;Occasionally, you might be tempted to add template parameters to a protocol. In those situations, add requirements to the protocol instead and retrieve the parameters from the conforming class. The reason for this guideline is that conforming classes will always inherit from &lt;computeroutput&gt;&lt;ref refid=&quot;structtt_1_1ConformsTo&quot; kindref=&quot;compound&quot;&gt;tt::ConformsTo&lt;/ref&gt;&amp;lt;Protocol&amp;gt;&lt;/computeroutput&gt;. Therefore, any template parameters of the protocol must also be template parameters of their conforming classes, which means the protocol can just require and retrieve them. For example, we could be tempted to follow this antipattern:&lt;/para&gt;</a>
<a name="112"><span class="lineNum">     112 </span>            : &lt;para&gt;&lt;programlisting filename=&quot;Utilities/Test_ProtocolHelpers.cpp&quot;&gt;&lt;codeline&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Don&amp;apos;t&lt;sp/&gt;do&lt;sp/&gt;this.&lt;sp/&gt;Protocols&lt;sp/&gt;should&lt;sp/&gt;not&lt;sp/&gt;have&lt;sp/&gt;template&lt;sp/&gt;parameters.&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="113"><span class="lineNum">     113 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;template&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&amp;lt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;typename&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;NameType&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="114"><span class="lineNum">     114 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;struct&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;NamedAntipattern&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="115"><span class="lineNum">     115 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;template&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&amp;lt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;typename&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;ConformingType&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="116"><span class="lineNum">     116 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;struct&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;test&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="117"><span class="lineNum">     117 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Check&lt;sp/&gt;that&lt;sp/&gt;the&lt;sp/&gt;`name`&lt;sp/&gt;function&lt;sp/&gt;exists&lt;sp/&gt;_and_&lt;sp/&gt;its&lt;sp/&gt;return&lt;sp/&gt;type&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="118"><span class="lineNum">     118 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;using&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;name_return_type&lt;sp/&gt;=&lt;sp/&gt;decltype(std::declval&amp;lt;ConformingType&amp;gt;().name());&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="119"><span class="lineNum">     119 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;static_assert(std::is_same_v&amp;lt;name_return_type,&lt;sp/&gt;NameType&amp;gt;,&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="120"><span class="lineNum">     120 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;stringliteral&quot;&gt;&amp;quot;The&lt;sp/&gt;&amp;apos;name&amp;apos;&lt;sp/&gt;function&lt;sp/&gt;must&lt;sp/&gt;return&lt;sp/&gt;a&lt;sp/&gt;&amp;apos;NameType&amp;apos;.&amp;quot;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;);&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="121"><span class="lineNum">     121 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;};&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="122"><span class="lineNum">     122 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;};&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="123"><span class="lineNum">     123 </span>            : &lt;/programlisting&gt; However, instead of adding template parameters to the protocol we should add a requirement to it:&lt;/para&gt;</a>
<a name="124"><span class="lineNum">     124 </span>            : &lt;para&gt;&lt;programlisting filename=&quot;Utilities/Test_ProtocolHelpers.cpp&quot;&gt;&lt;codeline&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Instead,&lt;sp/&gt;do&lt;sp/&gt;this.&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="125"><span class="lineNum">     125 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;struct&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;NamedWithType&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="126"><span class="lineNum">     126 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;template&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&amp;lt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;typename&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;ConformingType&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="127"><span class="lineNum">     127 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;struct&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;test&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="128"><span class="lineNum">     128 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;Use&lt;sp/&gt;the&lt;sp/&gt;`ConformingType::NameType`&lt;sp/&gt;to&lt;sp/&gt;check&lt;sp/&gt;the&lt;sp/&gt;return&lt;sp/&gt;type&lt;sp/&gt;of&lt;sp/&gt;the&lt;sp/&gt;`name`&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="129"><span class="lineNum">     129 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;comment&quot;&gt;//&lt;sp/&gt;function.&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="130"><span class="lineNum">     130 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;using&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;name_type&lt;sp/&gt;=&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;typename&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;ConformingType::NameType;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="131"><span class="lineNum">     131 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;using&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;name_return_type&lt;sp/&gt;=&lt;sp/&gt;decltype(std::declval&amp;lt;ConformingType&amp;gt;().name());&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="132"><span class="lineNum">     132 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;static_assert(std::is_same_v&amp;lt;name_return_type,&lt;sp/&gt;name_type&amp;gt;,&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="133"><span class="lineNum">     133 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;stringliteral&quot;&gt;&amp;quot;The&lt;sp/&gt;&amp;apos;name&amp;apos;&lt;sp/&gt;function&lt;sp/&gt;must&lt;sp/&gt;return&lt;sp/&gt;a&lt;sp/&gt;&amp;apos;NameType&amp;apos;.&amp;quot;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;);&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="134"><span class="lineNum">     134 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;};&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="135"><span class="lineNum">     135 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;};&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="136"><span class="lineNum">     136 </span>            : &lt;/programlisting&gt; Classes would need to specify the template parameters for any protocols they conform to anyway, if the protocols had any. So they might as well expose them:&lt;/para&gt;</a>
<a name="137"><span class="lineNum">     137 </span>            : &lt;para&gt;&lt;programlisting filename=&quot;Utilities/Test_ProtocolHelpers.cpp&quot;&gt;&lt;codeline&gt;&lt;highlight class=&quot;keyword&quot;&gt;struct&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;PersonWithNameType&lt;sp/&gt;:&lt;sp/&gt;&lt;ref refid=&quot;structtt_1_1ConformsTo&quot; kindref=&quot;compound&quot;&gt;tt::ConformsTo&lt;/ref&gt;&amp;lt;protocols::NamedWithType&amp;gt;&lt;sp/&gt;{&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="138"><span class="lineNum">     138 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;using&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;NameType&lt;sp/&gt;=&lt;sp/&gt;&lt;ref refid=&quot;cpp/string/basic_string&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::string&lt;/ref&gt;;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="139"><span class="lineNum">     139 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;ref refid=&quot;cpp/string/basic_string&quot; kindref=&quot;compound&quot; external=&quot;/__w/spectre/spectre/docs/config/cppreference-doxygen-web.tag.xml&quot;&gt;std::string&lt;/ref&gt;&lt;sp/&gt;name()&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;keyword&quot;&gt;const&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="140"><span class="lineNum">     140 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;};&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="141"><span class="lineNum">     141 </span>            : &lt;/programlisting&gt; This pattern also allows us to check for protocol conformance first and then add further checks about the types if we wanted to:&lt;/para&gt;</a>
<a name="142"><span class="lineNum">     142 </span>            : &lt;para&gt;&lt;programlisting filename=&quot;Utilities/Test_ProtocolHelpers.cpp&quot;&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;static_assert(&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="143"><span class="lineNum">     143 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;tt::assert_conforms_to&amp;lt;PersonWithNameType,&lt;sp/&gt;protocols::NamedWithType&amp;gt;);&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="144"><span class="lineNum">     144 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;static_assert(&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="145"><span class="lineNum">     145 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;std::is_same_v&amp;lt;typename&lt;sp/&gt;PersonWithNameType::NameType,&lt;sp/&gt;std::string&amp;gt;,&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="146"><span class="lineNum">     146 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;/highlight&gt;&lt;highlight class=&quot;stringliteral&quot;&gt;&amp;quot;The&lt;sp/&gt;`NameType`&lt;sp/&gt;isn&amp;apos;t&lt;sp/&gt;a&lt;sp/&gt;`std::string`!&amp;quot;&lt;/highlight&gt;&lt;highlight class=&quot;normal&quot;&gt;);&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="147"><span class="lineNum">     147 </span>            : &lt;/programlisting&gt; &lt;/para&gt;</a>
<a name="148"><span class="lineNum">     148 </span>            : &lt;/sect1&gt;</a>
<a name="149"><span class="lineNum">     149 </span>            : &lt;sect1 id=&quot;protocols_1protocols_testing&quot;&gt;</a>
<a name="150"><span class="lineNum">     150 </span>            : &lt;title&gt;Protocol authors: Testing a protocol&lt;/title&gt;</a>
<a name="151"><span class="lineNum">     151 </span>            : &lt;para&gt;Protocol authors should provide a unit test for their protocol that includes an example implementation of a class that conforms to it. The protocol author should add this example to the documentation of the protocol through a Doxygen snippet. This gives users a convenient way to see how the author intends their interface to be implemented.&lt;/para&gt;</a>
<a name="152"><span class="lineNum">     152 </span>            : &lt;/sect1&gt;</a>
<a name="153"><span class="lineNum">     153 </span>            : &lt;sect1 id=&quot;protocols_1protocols_and_constraints&quot;&gt;</a>
<a name="154"><span class="lineNum">     154 </span>            : &lt;title&gt;Protocols and C++20 &amp;quot;Constraints and concepts&amp;quot;&lt;/title&gt;</a>
<a name="155"><span class="lineNum">     155 </span>            : &lt;para&gt;A feature related to protocols is in C++20 and goes under the name of &lt;ulink url=&quot;https://en.cppreference.com/w/cpp/language/constraints&quot;&gt;constraints and concepts&lt;/ulink&gt;. Every protocol defines a &lt;emphasis&gt;concept&lt;/emphasis&gt;, but it defers checking its requirements to the unit tests to save compile time. In other words, protocols provide a way to &lt;emphasis&gt;indicate&lt;/emphasis&gt; that a class fulfills a set of requirements, whereas C++20 constraints provide a way to &lt;emphasis&gt;check&lt;/emphasis&gt; that a class fulfills a set of requirements. Therefore, the two features complement each other. Once C++20 becomes available in SpECTRE we can either gradually convert our protocols to concepts and use them as constraints directly if we find the impact on compile time negligible, or we can add a concept that checks protocol conformance the same way that &lt;computeroutput&gt;tt::conforms_to_v&lt;/computeroutput&gt; currently does (i.e. by checking inheritance). &lt;/para&gt;</a>
<a name="156"><span class="lineNum">     156 </span>            : &lt;/sect1&gt;</a>
<a name="157"><span class="lineNum">     157 </span>            :     &lt;/detaileddescription&gt;</a>
<a name="158"><span class="lineNum">     158 </span>            :   &lt;/compounddef&gt;</a>
<a name="159"><span class="lineNum">     159 </span>            : &lt;/doxygen&gt;</a>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.14</a></td></tr>
  </table>
  <br>

</body>
</html>
