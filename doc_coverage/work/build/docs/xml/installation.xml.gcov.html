<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - 102d152bb208d020115bc267fd9f132d57025466 - /work/build/docs/xml/installation.xml</title>
  <link rel="stylesheet" type="text/css" href="../../../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title"> SpECTRE Documentation Coverage Report</td></tr>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../../../index.html">top level</a> - <a href="index.html">work/build/docs/xml</a> - installation.xml</td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
             <td class="headerItem">Commit:</td>
             <td class="headerValue"><a target="_blank" href="https://github.com/sxs-collaboration/spectre/commit/102d152bb208d020115bc267fd9f132d57025466">102d152bb208d020115bc267fd9f132d57025466</a></td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2021-01-05 20:09:09</td>
            <td></td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span><span class="lineCov">          1 : &lt;?xml version='1.0' encoding='UTF-8' standalone='no'?&gt;</span></a>
<a name="2"><span class="lineNum">       2 </span>            : &lt;doxygen xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;compound.xsd&quot; version=&quot;1.8.17&quot;&gt;</a>
<a name="3"><span class="lineNum">       3 </span>            :   &lt;compounddef id=&quot;installation&quot; kind=&quot;page&quot;&gt;</a>
<a name="4"><span class="lineNum">       4 </span>            :     &lt;compoundname&gt;installation&lt;/compoundname&gt;</a>
<a name="5"><span class="lineNum">       5 </span>            :     &lt;title&gt;Installation&lt;/title&gt;</a>
<a name="6"><span class="lineNum">       6 </span>            :     &lt;briefdescription&gt;</a>
<a name="7"><span class="lineNum">       7 </span>            :     &lt;/briefdescription&gt;</a>
<a name="8"><span class="lineNum">       8 </span>            :     &lt;detaileddescription&gt;</a>
<a name="9"><span class="lineNum">       9 </span>            : &lt;para&gt;This page details the installation procedure for SpECTRE on personal computers. For instructions on installing SpECTRE on clusters please refer to the &lt;ref refid=&quot;installation_on_clusters&quot; kindref=&quot;compound&quot;&gt;Installation on clusters&lt;/ref&gt; page.&lt;/para&gt;</a>
<a name="10"><span class="lineNum">      10 </span>            : &lt;sect2 id=&quot;installation_1autotoc_md159&quot;&gt;</a>
<a name="11"><span class="lineNum">      11 </span>            : &lt;title&gt;Quick-start guide for code development with Docker and Visual Studio Code&lt;/title&gt;</a>
<a name="12"><span class="lineNum">      12 </span>            : &lt;para&gt;If you&amp;apos;re new to writing code for SpECTRE and would like to jump right into a working development environment, a good place to start is our &lt;ref refid=&quot;dev_guide_quick_start_docker_vscode&quot; kindref=&quot;compound&quot;&gt;Code development quick-start with Docker and Visual Studio Code&lt;/ref&gt;. If you prefer setting up your development environment differently, read on!&lt;/para&gt;</a>
<a name="13"><span class="lineNum">      13 </span>            : &lt;/sect2&gt;</a>
<a name="14"><span class="lineNum">      14 </span>            : &lt;sect2 id=&quot;installation_1autotoc_md160&quot;&gt;</a>
<a name="15"><span class="lineNum">      15 </span>            : &lt;title&gt;Dependencies&lt;/title&gt;</a>
<a name="16"><span class="lineNum">      16 </span>            : &lt;sect3 id=&quot;installation_1autotoc_md161&quot;&gt;</a>
<a name="17"><span class="lineNum">      17 </span>            : &lt;title&gt;Required:&lt;/title&gt;</a>
<a name="18"><span class="lineNum">      18 </span>            : &lt;para&gt;&lt;itemizedlist&gt;</a>
<a name="19"><span class="lineNum">      19 </span>            : &lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://gcc.gnu.org/&quot;&gt;GCC&lt;/ulink&gt; 7.0 or later, &lt;ulink url=&quot;https://clang.llvm.org/&quot;&gt;Clang&lt;/ulink&gt; 8.0 or later, or AppleClang 11.0.0 or later&lt;/para&gt;</a>
<a name="20"><span class="lineNum">      20 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://cmake.org/&quot;&gt;CMake&lt;/ulink&gt; 3.12.0 or later&lt;/para&gt;</a>
<a name="21"><span class="lineNum">      21 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;http://charm.cs.illinois.edu/&quot;&gt;Charm++&lt;/ulink&gt; 6.10.2&lt;/para&gt;</a>
<a name="22"><span class="lineNum">      22 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://git-scm.com/&quot;&gt;Git&lt;/ulink&gt;&lt;/para&gt;</a>
<a name="23"><span class="lineNum">      23 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;BLAS (e.g. &lt;ulink url=&quot;http://www.openblas.net&quot;&gt;OpenBLAS&lt;/ulink&gt;)&lt;/para&gt;</a>
<a name="24"><span class="lineNum">      24 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://bitbucket.org/blaze-lib/blaze/overview&quot;&gt;Blaze&lt;/ulink&gt; v3.5&lt;/para&gt;</a>
<a name="25"><span class="lineNum">      25 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;http://www.boost.org/&quot;&gt;Boost&lt;/ulink&gt; 1.60.0 or later&lt;/para&gt;</a>
<a name="26"><span class="lineNum">      26 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://github.com/edouarda/brigand&quot;&gt;Brigand&lt;/ulink&gt;&lt;/para&gt;</a>
<a name="27"><span class="lineNum">      27 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://github.com/philsquared/Catch&quot;&gt;Catch&lt;/ulink&gt; 2.8.0 or later&lt;/para&gt;</a>
<a name="28"><span class="lineNum">      28 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://www.gnu.org/software/gsl/&quot;&gt;GSL&lt;/ulink&gt;&lt;/para&gt;</a>
<a name="29"><span class="lineNum">      29 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://support.hdfgroup.org/HDF5/&quot;&gt;HDF5&lt;/ulink&gt; (non-mpi version on macOS)&lt;/para&gt;</a>
<a name="30"><span class="lineNum">      30 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://github.com/jemalloc/jemalloc&quot;&gt;jemalloc&lt;/ulink&gt;&lt;/para&gt;</a>
<a name="31"><span class="lineNum">      31 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;LAPACK&lt;/para&gt;</a>
<a name="32"><span class="lineNum">      32 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://github.com/Libsharp/libsharp&quot;&gt;libsharp&lt;/ulink&gt; should be built with support disabled for openmp and mpi, as we want all of our parallelism to be accomplished via Charm++.&lt;/para&gt;</a>
<a name="33"><span class="lineNum">      33 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://github.com/hfp/libxsmm&quot;&gt;LIBXSMM&lt;/ulink&gt;&lt;/para&gt;</a>
<a name="34"><span class="lineNum">      34 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://github.com/jbeder/yaml-cpp&quot;&gt;yaml-cpp&lt;/ulink&gt; version 0.6.3 is recommended. Building with shared library support is also recommended.&lt;/para&gt;</a>
<a name="35"><span class="lineNum">      35 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://www.python.org/&quot;&gt;Python&lt;/ulink&gt; 2.7, or 3.5 or later&lt;/para&gt;</a>
<a name="36"><span class="lineNum">      36 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;http://www.numpy.org/&quot;&gt;NumPy&lt;/ulink&gt; 1.10 or later&lt;/para&gt;</a>
<a name="37"><span class="lineNum">      37 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://www.scipy.org&quot;&gt;SciPy&lt;/ulink&gt;&lt;/para&gt;</a>
<a name="38"><span class="lineNum">      38 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://matplotlib.org/&quot;&gt;matplotlib&lt;/ulink&gt;&lt;/para&gt;</a>
<a name="39"><span class="lineNum">      39 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="40"><span class="lineNum">      40 </span>            : &lt;/para&gt;</a>
<a name="41"><span class="lineNum">      41 </span>            : &lt;/sect3&gt;</a>
<a name="42"><span class="lineNum">      42 </span>            : &lt;sect3 id=&quot;installation_1autotoc_md162&quot;&gt;</a>
<a name="43"><span class="lineNum">      43 </span>            : &lt;title&gt;Optional:&lt;/title&gt;</a>
<a name="44"><span class="lineNum">      44 </span>            : &lt;para&gt;&lt;itemizedlist&gt;</a>
<a name="45"><span class="lineNum">      45 </span>            : &lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://pybind11.readthedocs.io&quot;&gt;Pybind11&lt;/ulink&gt; 2.6.0 or later for SpECTRE Python bindings&lt;/para&gt;</a>
<a name="46"><span class="lineNum">      46 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;http://www.stack.nl/~dimitri/doxygen/index.html&quot;&gt;Doxygen&lt;/ulink&gt; — to generate documentation&lt;/para&gt;</a>
<a name="47"><span class="lineNum">      47 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://www.python.org/&quot;&gt;Python&lt;/ulink&gt; with &lt;ulink url=&quot;https://pypi.org/project/beautifulsoup4/&quot;&gt;BeautifulSoup4&lt;/ulink&gt; and &lt;ulink url=&quot;https://pybtex.org&quot;&gt;Pybtex&lt;/ulink&gt; — for documentation post-processing&lt;/para&gt;</a>
<a name="48"><span class="lineNum">      48 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://github.com/google/benchmark&quot;&gt;Google Benchmark&lt;/ulink&gt; - to do microbenchmarking inside the SpECTRE framework. v1.2 or newer is required&lt;/para&gt;</a>
<a name="49"><span class="lineNum">      49 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;http://ltp.sourceforge.net/coverage/lcov.php&quot;&gt;LCOV&lt;/ulink&gt; and &lt;ulink url=&quot;https://gcc.gnu.org/onlinedocs/gcc/Gcov.html&quot;&gt;gcov&lt;/ulink&gt; — to check code test coverage&lt;/para&gt;</a>
<a name="50"><span class="lineNum">      50 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://github.com/psycofdj/coverxygen&quot;&gt;coverxygen&lt;/ulink&gt; — to check documentation coverage&lt;/para&gt;</a>
<a name="51"><span class="lineNum">      51 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;http://icl.utk.edu/papi/&quot;&gt;PAPI&lt;/ulink&gt; — to access hardware performance counters&lt;/para&gt;</a>
<a name="52"><span class="lineNum">      52 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://clang.llvm.org/docs/ClangFormat.html&quot;&gt;ClangFormat&lt;/ulink&gt; — to format C++ code in a clear and consistent fashion&lt;/para&gt;</a>
<a name="53"><span class="lineNum">      53 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;http://clang.llvm.org/extra/clang-tidy/&quot;&gt;Clang-Tidy&lt;/ulink&gt; — to &amp;quot;lint&amp;quot; C++ code&lt;/para&gt;</a>
<a name="54"><span class="lineNum">      54 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;http://cppcheck.sourceforge.net/&quot;&gt;Cppcheck&lt;/ulink&gt; — to analyze C++ code&lt;/para&gt;</a>
<a name="55"><span class="lineNum">      55 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;ulink url=&quot;https://github.com/google/yapf&quot;&gt;yapf&lt;/ulink&gt; 0.29.0 - to format python code&lt;/para&gt;</a>
<a name="56"><span class="lineNum">      56 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="57"><span class="lineNum">      57 </span>            : &lt;/para&gt;</a>
<a name="58"><span class="lineNum">      58 </span>            : &lt;/sect3&gt;</a>
<a name="59"><span class="lineNum">      59 </span>            : &lt;/sect2&gt;</a>
<a name="60"><span class="lineNum">      60 </span>            : &lt;sect1 id=&quot;installation_1autotoc_md163&quot;&gt;</a>
<a name="61"><span class="lineNum">      61 </span>            : &lt;title&gt;Using Docker to obtain a SpECTRE environment&lt;/title&gt;</a>
<a name="62"><span class="lineNum">      62 </span>            : &lt;para&gt;A &lt;ulink url=&quot;https://www.docker.com/&quot;&gt;Docker&lt;/ulink&gt; image is available from &lt;ulink url=&quot;https://hub.docker.com/r/sxscollaboration/spectrebuildenv/&quot;&gt;DockerHub&lt;/ulink&gt; and can be used to build SpECTRE on a personal machine.&lt;/para&gt;</a>
<a name="63"><span class="lineNum">      63 </span>            : &lt;para&gt;&lt;bold&gt;Note&lt;/bold&gt;: The Docker image is the recommended way of using SpECTRE on a personal Linux machine. Because of the wide variety of operating systems available today it is not possible for us to support all configurations. However, using Spack as outlined below is a supported alternative to Docker images.&lt;/para&gt;</a>
<a name="64"><span class="lineNum">      64 </span>            : &lt;para&gt;&lt;bold&gt;NOTE&lt;/bold&gt;: If you have SELinux active on your system you must figure out how to enable sharing files with the host OS. If you receive errors that you do not have permission to access a shared directory it is likely that your system has SELinux enabled. One option is to disable SELinux at the expense of reducing the security of your system.&lt;/para&gt;</a>
<a name="65"><span class="lineNum">      65 </span>            : &lt;para&gt;To build with the docker image:&lt;/para&gt;</a>
<a name="66"><span class="lineNum">      66 </span>            : &lt;para&gt;&lt;orderedlist&gt;</a>
<a name="67"><span class="lineNum">      67 </span>            : &lt;listitem&gt;&lt;para&gt;Clone SpECTRE into SPECTRE_ROOT, a directory of your choice.&lt;/para&gt;</a>
<a name="68"><span class="lineNum">      68 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Retrieve the docker image (you may need &lt;computeroutput&gt;sudo&lt;/computeroutput&gt; in front of this command) &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;docker&lt;sp/&gt;pull&lt;sp/&gt;sxscollaboration/spectrebuildenv:latest&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="69"><span class="lineNum">      69 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="70"><span class="lineNum">      70 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Start the docker container (you may need &lt;computeroutput&gt;sudo&lt;/computeroutput&gt;) &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;docker&lt;sp/&gt;run&lt;sp/&gt;-v&lt;sp/&gt;SPECTRE_ROOT:SPECTRE_ROOT&lt;sp/&gt;--name&lt;sp/&gt;CONTAINER_NAME&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="71"><span class="lineNum">      71 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-i&lt;sp/&gt;-t&lt;sp/&gt;sxscollaboration/spectrebuildenv:latest&lt;sp/&gt;/bin/bash&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="72"><span class="lineNum">      72 </span>            : &lt;/programlisting&gt;&lt;itemizedlist&gt;</a>
<a name="73"><span class="lineNum">      73 </span>            : &lt;listitem&gt;&lt;para&gt;The &lt;computeroutput&gt;--name CONTAINER_NAME&lt;/computeroutput&gt; is optional, where CONTAINER_NAME is a name of your choice. If you don&amp;apos;t name your container, docker will generate an arbitrary name.&lt;/para&gt;</a>
<a name="74"><span class="lineNum">      74 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;On macOS you can significantly increase the performance of file system operations by appending the flag &lt;computeroutput&gt;:delegated&lt;/computeroutput&gt; to &lt;computeroutput&gt;-v&lt;/computeroutput&gt;, e.g. &lt;computeroutput&gt;-v SPECTRE_ROOT:SPECTRE_ROOT:delegated&lt;/computeroutput&gt; (see &lt;ulink url=&quot;https://docs.docker.com/docker-for-mac/osxfs-caching/&quot;&gt;https://docs.docker.com/docker-for-mac/osxfs-caching/&lt;/ulink&gt;).&lt;/para&gt;</a>
<a name="75"><span class="lineNum">      75 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;It can be useful to expose a port to the host so you can run servers such as &lt;ulink url=&quot;https://jupyter.org/index.html&quot;&gt;Jupyter&lt;/ulink&gt; for accessing the Python bindings (see &lt;ref refid=&quot;spectre_using_python&quot; kindref=&quot;compound&quot;&gt;Using SpECTRE&amp;apos;s Python modules&lt;/ref&gt;) or a Python web server to view the documentation. To do so, append the &lt;computeroutput&gt;-p&lt;/computeroutput&gt; option, e.g. &lt;computeroutput&gt;-p 8000:8000&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="76"><span class="lineNum">      76 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="77"><span class="lineNum">      77 </span>            : &lt;/para&gt;</a>
<a name="78"><span class="lineNum">      78 </span>            : &lt;para&gt;You will end up in a shell in the docker container, as root (you need to be root). Within the container, the files in SPECTRE_ROOT are available and Charm++ is installed in &lt;computeroutput&gt;/work/charm&lt;/computeroutput&gt;. For the following steps, stay inside the docker container as root.&lt;/para&gt;</a>
<a name="79"><span class="lineNum">      79 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Make a build directory somewhere inside the container, e.g. &lt;computeroutput&gt;/work/spectre-build-gcc&lt;/computeroutput&gt;, and cd into it.&lt;/para&gt;</a>
<a name="80"><span class="lineNum">      80 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Build SpECTRE with &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;cmake&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_Fortran_COMPILER=gfortran-8&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="81"><span class="lineNum">      81 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CHARM_ROOT=/work/charm/multicore-linux-x86_64-gcc&lt;sp/&gt;SPECTRE_ROOT&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="82"><span class="lineNum">      82 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="83"><span class="lineNum">      83 </span>            : &lt;para&gt;then &lt;computeroutput&gt;make -jN&lt;/computeroutput&gt; to compile the code, &lt;computeroutput&gt;make test-executables -jN&lt;/computeroutput&gt; to compile the test executables, and &lt;computeroutput&gt;ctest&lt;/computeroutput&gt; to run the tests.&lt;/para&gt;</a>
<a name="84"><span class="lineNum">      84 </span>            : &lt;/listitem&gt;&lt;/orderedlist&gt;</a>
<a name="85"><span class="lineNum">      85 </span>            : &lt;/para&gt;</a>
<a name="86"><span class="lineNum">      86 </span>            : &lt;para&gt;Notes:&lt;itemizedlist&gt;</a>
<a name="87"><span class="lineNum">      87 </span>            : &lt;listitem&gt;&lt;para&gt;Everything in your build directory is owned by root, and is accessible only within the container.&lt;/para&gt;</a>
<a name="88"><span class="lineNum">      88 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;You should edit source files in SPECTRE_ROOT in a separate terminal outside the container, and use the container only for compiling and running the code.&lt;/para&gt;</a>
<a name="89"><span class="lineNum">      89 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;If you exit the container (e.g. ctrl-d), your compilation directories are still saved, as is the patch that you have applied to /work/charm and any other changes to the container that you have made. To restart the container, try the following commands (you may need &lt;computeroutput&gt;sudo&lt;/computeroutput&gt;):&lt;orderedlist&gt;</a>
<a name="90"><span class="lineNum">      90 </span>            : &lt;listitem&gt;&lt;para&gt;&lt;computeroutput&gt;docker ps -a&lt;/computeroutput&gt;, to list all containers with their CONTAINER_IDs and CONTAINER_NAMEs,&lt;/para&gt;</a>
<a name="91"><span class="lineNum">      91 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;computeroutput&gt;docker start -i CONTAINER_NAME&lt;/computeroutput&gt; or &lt;computeroutput&gt;docker start -i CONTAINER_ID&lt;/computeroutput&gt;, to restart your container.&lt;/para&gt;</a>
<a name="92"><span class="lineNum">      92 </span>            : &lt;/listitem&gt;&lt;/orderedlist&gt;</a>
<a name="93"><span class="lineNum">      93 </span>            : &lt;/para&gt;</a>
<a name="94"><span class="lineNum">      94 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;You can run more than one shell in the same container, for instance one shell for compiling with gcc and another for compiling with clang. To add a new shell, run &lt;computeroutput&gt;docker exec -it CONTAINER_NAME /bin/bash&lt;/computeroutput&gt; (or &lt;computeroutput&gt;docker exec -it CONTAINER_ID /bin/bash&lt;/computeroutput&gt;) from a terminal outside the container.&lt;/para&gt;</a>
<a name="95"><span class="lineNum">      95 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;In step 3 above, the &lt;computeroutput&gt;-v SPECTRE_ROOT:SPECTRE_ROOT&lt;/computeroutput&gt; maps the directory SPECTRE_ROOT outside the container to SPECTRE_ROOT inside the container. Technically docker allows you to say &lt;computeroutput&gt;-v SPECTRE_ROOT:/my/new/path&lt;/computeroutput&gt; to map SPECTRE_ROOT outside the container to any path you want inside the container, but &lt;bold&gt;do not do this&lt;/bold&gt;. Compiling inside the container sets up git hooks in SPECTRE_ROOT that contain hardcoded pathnames to SPECTRE_ROOT &lt;emphasis&gt;as seen from inside the container&lt;/emphasis&gt;. So if your source paths inside and outside the container are different, commands like &lt;computeroutput&gt;git commit&lt;/computeroutput&gt; run &lt;emphasis&gt;from outside the container&lt;/emphasis&gt; will die with &lt;computeroutput&gt;No such file or directory&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="96"><span class="lineNum">      96 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;To compile with clang, the cmake command is &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;cmake&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_CXX_COMPILER=clang++&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="97"><span class="lineNum">      97 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_C_COMPILER=clang&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="98"><span class="lineNum">      98 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_Fortran_COMPILER=gfortran-8&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="99"><span class="lineNum">      99 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CHARM_ROOT=/work/charm/multicore-linux-x86_64-clang&lt;sp/&gt;SPECTRE_ROOT&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="100"><span class="lineNum">     100 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="101"><span class="lineNum">     101 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;To compile the Python bindings, add the option &lt;computeroutput&gt;-D BUILD_PYTHON_BINDINGS=ON&lt;/computeroutput&gt; to the &lt;computeroutput&gt;cmake&lt;/computeroutput&gt; command (see &lt;ref refid=&quot;spectre_writing_python_bindings&quot; kindref=&quot;compound&quot;&gt;Writing Python Bindings&lt;/ref&gt;). You can specify the Python version, interpreter and libraries used for compiling and testing the bindings by setting the &lt;computeroutput&gt;-D Python_EXECUTABLE&lt;/computeroutput&gt; to an absolute path such as &lt;computeroutput&gt;/usr/bin/python3&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="102"><span class="lineNum">     102 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;When the Docker container gets updated, you can stop it with &lt;computeroutput&gt;docker stop CONTAINER_NAME&lt;/computeroutput&gt;, remove it with &lt;computeroutput&gt;docker rm CONTAINER_NAME&lt;/computeroutput&gt; and then start at step 2 above to run it again.&lt;/para&gt;</a>
<a name="103"><span class="lineNum">     103 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="104"><span class="lineNum">     104 </span>            : &lt;/para&gt;</a>
<a name="105"><span class="lineNum">     105 </span>            : &lt;/sect1&gt;</a>
<a name="106"><span class="lineNum">     106 </span>            : &lt;sect1 id=&quot;installation_1autotoc_md164&quot;&gt;</a>
<a name="107"><span class="lineNum">     107 </span>            : &lt;title&gt;Using Singularity to obtain a SpECTRE environment&lt;/title&gt;</a>
<a name="108"><span class="lineNum">     108 </span>            : &lt;para&gt;&lt;ulink url=&quot;https://sylabs.io&quot;&gt;Singularity&lt;/ulink&gt; is a container alternative to Docker with better security and nicer integration.&lt;/para&gt;</a>
<a name="109"><span class="lineNum">     109 </span>            : &lt;para&gt;To use Singularity you must:&lt;/para&gt;</a>
<a name="110"><span class="lineNum">     110 </span>            : &lt;para&gt;&lt;orderedlist&gt;</a>
<a name="111"><span class="lineNum">     111 </span>            : &lt;listitem&gt;&lt;para&gt;Build &lt;ulink url=&quot;https://sylabs.io&quot;&gt;Singularity&lt;/ulink&gt; and add it to your &lt;computeroutput&gt;$PATH&lt;/computeroutput&gt;&lt;/para&gt;</a>
<a name="112"><span class="lineNum">     112 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;computeroutput&gt;cd&lt;/computeroutput&gt; to the directory where you want to store the SpECTRE Singularity image, source, and build directories, let&amp;apos;s call it WORKDIR. The WORKDIR must be somewhere in your home directory. If this does not work for you, follow the Singularity instructions on setting up additional &lt;ulink url=&quot;https://sylabs.io/guides/3.7/user-guide/bind_paths_and_mounts.html&quot;&gt;bind points&lt;/ulink&gt; (version 3.7. For other versions, see the &lt;ulink url=&quot;https://sylabs.io/docs/&quot;&gt;docs&lt;/ulink&gt;). Once inside the WORKDIR, clone SpECTRE into &lt;computeroutput&gt;WORKDIR/SPECTRE_ROOT&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="113"><span class="lineNum">     113 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Run &lt;computeroutput&gt;sudo singularity build spectre.img docker://sxscollaboration/spectrebuildenv:latest&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="114"><span class="lineNum">     114 </span>            : &lt;para&gt;If you get the error message that &lt;computeroutput&gt;makesquashfs&lt;/computeroutput&gt; did not have enough space to create the image you need to set a different &lt;computeroutput&gt;SINGULARITY_TMPDIR&lt;/computeroutput&gt;. This can be done by running: &lt;computeroutput&gt;sudo SINGULARITY_TMPDIR=/path/to/new/tmp singularity build spectre.img docker://sxscollaboration/spectrebuildenv:latest&lt;/computeroutput&gt;. Normally &lt;computeroutput&gt;SINGULARITY_TMPDIR&lt;/computeroutput&gt; is &lt;computeroutput&gt;/tmp&lt;/computeroutput&gt;, but building the image will temporarily need almost 8GB of space.&lt;/para&gt;</a>
<a name="115"><span class="lineNum">     115 </span>            : &lt;para&gt;You can control where Singularity stores the downloaded image files from DockerHub by specifying the &lt;computeroutput&gt;SINGULARITY_CACHEDIR&lt;/computeroutput&gt; environment variable. The default is &lt;computeroutput&gt;$HOME/.singularity/&lt;/computeroutput&gt;. Note that &lt;computeroutput&gt;$HOME&lt;/computeroutput&gt; is &lt;computeroutput&gt;/root&lt;/computeroutput&gt; when running using &lt;computeroutput&gt;sudo&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="116"><span class="lineNum">     116 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;To start the container run &lt;computeroutput&gt;singularity shell spectre.img&lt;/computeroutput&gt; and you will be dropped into a bash shell.&lt;/para&gt;</a>
<a name="117"><span class="lineNum">     117 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Run &lt;computeroutput&gt;cd SPECTRE_HOME &amp;amp;&amp;amp; mkdir build &amp;amp;&amp;amp; cd build&lt;/computeroutput&gt; to set up a build directory.&lt;/para&gt;</a>
<a name="118"><span class="lineNum">     118 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;To build SpECTRE run &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;cmake&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_Fortran_COMPILER=gfortran-8&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="119"><span class="lineNum">     119 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CHARM_ROOT=/work/charm/multicore-linux-x86_64-gcc&lt;sp/&gt;SPECTRE_ROOT&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="120"><span class="lineNum">     120 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="121"><span class="lineNum">     121 </span>            : &lt;para&gt;followed by &lt;computeroutput&gt;make -jN&lt;/computeroutput&gt; where &lt;computeroutput&gt;N&lt;/computeroutput&gt; is the number of cores to build on in parallel.&lt;/para&gt;</a>
<a name="122"><span class="lineNum">     122 </span>            : &lt;/listitem&gt;&lt;/orderedlist&gt;</a>
<a name="123"><span class="lineNum">     123 </span>            : &lt;/para&gt;</a>
<a name="124"><span class="lineNum">     124 </span>            : &lt;para&gt;Notes:&lt;itemizedlist&gt;</a>
<a name="125"><span class="lineNum">     125 </span>            : &lt;listitem&gt;&lt;para&gt;You should edit source files in SPECTRE_ROOT in a separate terminal outside the container, and use the container only for compiling and running the code.&lt;/para&gt;</a>
<a name="126"><span class="lineNum">     126 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Unlike Docker, Singularity does not keep the state between runs. However, it shares the home directory with the host OS so you should do all your work somewhere in your home directory.&lt;/para&gt;</a>
<a name="127"><span class="lineNum">     127 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;To run more than one container just do &lt;computeroutput&gt;singularity shell spectre.img&lt;/computeroutput&gt; in another terminal.&lt;/para&gt;</a>
<a name="128"><span class="lineNum">     128 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Since the data you modify lives on the host OS there is no need to worry about losing any data, needing to clean up old containers, or sharing data between containers and the host.&lt;/para&gt;</a>
<a name="129"><span class="lineNum">     129 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;To build with clang, the CMake command is: &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;cmake&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_CXX_COMPILER=clang++&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="130"><span class="lineNum">     130 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_C_COMPILER=clang&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="131"><span class="lineNum">     131 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_Fortran_COMPILER=gfortran-8&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="132"><span class="lineNum">     132 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CHARM_ROOT=/work/charm/multicore-linux-x86_64-clang&lt;sp/&gt;SPECTRE_ROOT&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="133"><span class="lineNum">     133 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="134"><span class="lineNum">     134 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="135"><span class="lineNum">     135 </span>            : &lt;/para&gt;</a>
<a name="136"><span class="lineNum">     136 </span>            : &lt;/sect1&gt;</a>
<a name="137"><span class="lineNum">     137 </span>            : &lt;sect1 id=&quot;installation_1autotoc_md165&quot;&gt;</a>
<a name="138"><span class="lineNum">     138 </span>            : &lt;title&gt;Using Spack to set up a SpECTRE environment&lt;/title&gt;</a>
<a name="139"><span class="lineNum">     139 </span>            : &lt;para&gt;SpECTRE&amp;apos;s dependencies can be installed with &lt;ulink url=&quot;https://github.com/LLNL/spack&quot;&gt;Spack&lt;/ulink&gt;, a package manager tailored for HPC use. Install Spack by cloning it into &lt;computeroutput&gt;SPACK_DIR&lt;/computeroutput&gt; (a directory of your choice), then add &lt;computeroutput&gt;SPACK_DIR/bin&lt;/computeroutput&gt; to your &lt;computeroutput&gt;PATH&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="140"><span class="lineNum">     140 </span>            : &lt;para&gt;For security, it is good practice to make Spack use the system&amp;apos;s OpenSSL rather than allow it to install a new copy — see Spack&amp;apos;s documentation for &lt;ulink url=&quot;https://spack.readthedocs.io/en/latest/getting_started.html#openssl&quot;&gt;instructions&lt;/ulink&gt;. You may need to install the development version of OpenSSL:&lt;itemizedlist&gt;</a>
<a name="141"><span class="lineNum">     141 </span>            : &lt;listitem&gt;&lt;para&gt;On Ubuntu (16.04), run &lt;computeroutput&gt;sudo apt-get install libssl-dev&lt;/computeroutput&gt;&lt;/para&gt;</a>
<a name="142"><span class="lineNum">     142 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;On Fedora (27), run &lt;computeroutput&gt;sudo dnf install openssl-devel&lt;/computeroutput&gt;&lt;/para&gt;</a>
<a name="143"><span class="lineNum">     143 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="144"><span class="lineNum">     144 </span>            : &lt;/para&gt;</a>
<a name="145"><span class="lineNum">     145 </span>            : &lt;para&gt;Spack works well with a module environment. We recommend &lt;ulink url=&quot;https://github.com/TACC/Lmod&quot;&gt;LMod&lt;/ulink&gt;, which is available on many systems:&lt;itemizedlist&gt;</a>
<a name="146"><span class="lineNum">     146 </span>            : &lt;listitem&gt;&lt;para&gt;On macOS, install LMod from &lt;ulink url=&quot;https://brew.sh/&quot;&gt;brew&lt;/ulink&gt;, then source the LMod shell script by adding &lt;computeroutput&gt;. /usr/local/Cellar/lmod/YOUR_VERSION_NUMBER/init/sh&lt;/computeroutput&gt; to your &lt;computeroutput&gt;.bash_profile&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="147"><span class="lineNum">     147 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;On Ubuntu, run &lt;computeroutput&gt;sudo apt-get install -y lmod&lt;/computeroutput&gt; and, for Ubuntu 17.04, add &lt;computeroutput&gt;. /etc/profile.d/lmod.sh&lt;/computeroutput&gt; to your &lt;computeroutput&gt;.bashrc&lt;/computeroutput&gt;. For Ubuntu 16.04, the correct path to add is &lt;computeroutput&gt;. /usr/share/lmod/lmod/init/bash&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="148"><span class="lineNum">     148 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;On Arch Linux, run &lt;computeroutput&gt;yaourt -Sy lmod&lt;/computeroutput&gt; and add &lt;computeroutput&gt;. /etc/profile.d/lmod.sh&lt;/computeroutput&gt; to your &lt;computeroutput&gt;.bashrc&lt;/computeroutput&gt;,&lt;/para&gt;</a>
<a name="149"><span class="lineNum">     149 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;On Fedora/RHEL, GNU Environment Modules comes out-of-the-box and works equally well.&lt;/para&gt;</a>
<a name="150"><span class="lineNum">     150 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Instructions for other Linux distros are available online.&lt;/para&gt;</a>
<a name="151"><span class="lineNum">     151 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="152"><span class="lineNum">     152 </span>            : &lt;/para&gt;</a>
<a name="153"><span class="lineNum">     153 </span>            : &lt;para&gt;To use modules with Spack, enable Spack&amp;apos;s shell support by adding &lt;computeroutput&gt;. SPACK_DIR/share/spack/setup-env.sh&lt;/computeroutput&gt; to your &lt;computeroutput&gt;.bash_profile&lt;/computeroutput&gt; or &lt;computeroutput&gt;.bashrc&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="154"><span class="lineNum">     154 </span>            : &lt;para&gt;Once you have Spack installed and configured with OpenSSL and LMod, you can install the SpECTRE dependencies using &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;spack&lt;sp/&gt;install&lt;sp/&gt;blaze@3.2&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="155"><span class="lineNum">     155 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;spack&lt;sp/&gt;install&lt;sp/&gt;brigand@master&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="156"><span class="lineNum">     156 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;spack&lt;sp/&gt;install&lt;sp/&gt;libsharp&lt;sp/&gt;-openmp&lt;sp/&gt;-mpi&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="157"><span class="lineNum">     157 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;spack&lt;sp/&gt;install&lt;sp/&gt;catch2&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="158"><span class="lineNum">     158 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;spack&lt;sp/&gt;install&lt;sp/&gt;gsl&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="159"><span class="lineNum">     159 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;spack&lt;sp/&gt;install&lt;sp/&gt;jemalloc&lt;sp/&gt;#&lt;sp/&gt;or&lt;sp/&gt;from&lt;sp/&gt;your&lt;sp/&gt;package&lt;sp/&gt;manager&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="160"><span class="lineNum">     160 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;spack&lt;sp/&gt;install&lt;sp/&gt;libxsmm&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="161"><span class="lineNum">     161 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;spack&lt;sp/&gt;install&lt;sp/&gt;yaml-cpp@develop&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="162"><span class="lineNum">     162 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="163"><span class="lineNum">     163 </span>            : &lt;para&gt;You can also install CMake, OpenBLAS, Boost, and HDF5 from Spack. To load the packages you&amp;apos;ve installed from Spack run &lt;computeroutput&gt;spack load PACKAGE&lt;/computeroutput&gt;, or (equivalently) use the &lt;computeroutput&gt;module load&lt;/computeroutput&gt; command.&lt;/para&gt;</a>
<a name="164"><span class="lineNum">     164 </span>            : &lt;para&gt;&lt;bold&gt;Note&lt;/bold&gt;: Spack allows very flexible configurations and it is recommended you read the &lt;ulink url=&quot;https://spack.readthedocs.io&quot;&gt;documentation&lt;/ulink&gt; if you require features such as packages installed with different compilers.&lt;/para&gt;</a>
<a name="165"><span class="lineNum">     165 </span>            : &lt;para&gt;&lt;bold&gt;Note&lt;/bold&gt;: On a Mac, you may need to &lt;computeroutput&gt;spack install yaml-cpp@develop~shared&lt;/computeroutput&gt; (note that is a tilde and not a dash in front of shared) in order to force the building of the static libraries in order to avoid dynamic linking errors.&lt;/para&gt;</a>
<a name="166"><span class="lineNum">     166 </span>            : &lt;sect2 id=&quot;installation_1autotoc_md166&quot;&gt;</a>
<a name="167"><span class="lineNum">     167 </span>            : &lt;title&gt;Building SpECTRE&lt;/title&gt;</a>
<a name="168"><span class="lineNum">     168 </span>            : &lt;para&gt;After the dependencies have been installed, Charm++ and SpECTRE can be compiled. Follow these steps:&lt;/para&gt;</a>
<a name="169"><span class="lineNum">     169 </span>            : &lt;para&gt;&lt;orderedlist&gt;</a>
<a name="170"><span class="lineNum">     170 </span>            : &lt;listitem&gt;&lt;para&gt;Clone &lt;ulink url=&quot;https://github.com/sxs-collaboration/spectre&quot;&gt;SpECTRE&lt;/ulink&gt; into &lt;computeroutput&gt;SPECTRE_ROOT&lt;/computeroutput&gt;, a directory of your choice.&lt;/para&gt;</a>
<a name="171"><span class="lineNum">     171 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Install Charm++:&lt;itemizedlist&gt;</a>
<a name="172"><span class="lineNum">     172 </span>            : &lt;listitem&gt;&lt;para&gt;Clone &lt;ulink url=&quot;http://charm.cs.illinois.edu/software&quot;&gt;Charm++&lt;/ulink&gt; into &lt;computeroutput&gt;CHARM_DIR&lt;/computeroutput&gt;, again a directory of your choice.&lt;/para&gt;</a>
<a name="173"><span class="lineNum">     173 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;In &lt;computeroutput&gt;CHARM_DIR&lt;/computeroutput&gt;, run &lt;computeroutput&gt;git checkout v6.10.2&lt;/computeroutput&gt; to switch to a supported, stable release of Charm++.&lt;/para&gt;</a>
<a name="174"><span class="lineNum">     174 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Charm++ is compiled by running &lt;computeroutput&gt;./build charm++ ARCH OPTIONS&lt;/computeroutput&gt;. To figure out the correct target architecture and options, you can simply run &lt;computeroutput&gt;./build&lt;/computeroutput&gt;; the script will then ask you questions to guide you towards the correct settings (see notes below for additional details). Then compile Charm++. The Charm++ build will be located in a new directory, &lt;computeroutput&gt;CHARM_DIR/ARCH_OPTS&lt;/computeroutput&gt;, whose name may (or may not) have some of the options appended to the architecture.&lt;/para&gt;</a>
<a name="175"><span class="lineNum">     175 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;On macOS 10.12 it is necessary to patch the STL implementation. Insert &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;#ifndef&lt;sp/&gt;_MACH_PORT_T&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="176"><span class="lineNum">     176 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;#define&lt;sp/&gt;_MACH_PORT_T&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="177"><span class="lineNum">     177 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;#include&lt;sp/&gt;&amp;lt;sys/_types.h&amp;gt;&lt;sp/&gt;/*&lt;sp/&gt;__darwin_mach_port_t&lt;sp/&gt;*/&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="178"><span class="lineNum">     178 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;typedef&lt;sp/&gt;__darwin_mach_port_t&lt;sp/&gt;mach_port_t;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="179"><span class="lineNum">     179 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;#include&lt;sp/&gt;&amp;lt;pthread.h&amp;gt;&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="180"><span class="lineNum">     180 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;mach_port_t&lt;sp/&gt;pthread_mach_thread_np(pthread_t);&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="181"><span class="lineNum">     181 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;#endif&lt;sp/&gt;/*&lt;sp/&gt;_MACH_PORT_T&lt;sp/&gt;*/&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="182"><span class="lineNum">     182 </span>            : &lt;/programlisting&gt; into the front of &lt;computeroutput&gt;/Library/Developer/CommandLineTools/usr/include/c++/v1/__threading_support&lt;/computeroutput&gt;&lt;/para&gt;</a>
<a name="183"><span class="lineNum">     183 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="184"><span class="lineNum">     184 </span>            : &lt;/para&gt;</a>
<a name="185"><span class="lineNum">     185 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Return to &lt;computeroutput&gt;SPECTRE_ROOT&lt;/computeroutput&gt;, and create a build dir by running &lt;computeroutput&gt;mkdir build &amp;amp;&amp;amp; cd build&lt;/computeroutput&gt;&lt;/para&gt;</a>
<a name="186"><span class="lineNum">     186 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Build SpECTRE with &lt;computeroutput&gt;cmake -D CHARM_ROOT=CHARM_DIR/ARCH_OPTS SPECTRE_ROOT&lt;/computeroutput&gt; then &lt;computeroutput&gt;make -jN&lt;/computeroutput&gt; to compile the code.&lt;/para&gt;</a>
<a name="187"><span class="lineNum">     187 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Run the tests with &lt;computeroutput&gt;make test-executables &amp;amp;&amp;amp; ctest&lt;/computeroutput&gt;.&lt;/para&gt;</a>
<a name="188"><span class="lineNum">     188 </span>            : &lt;/listitem&gt;&lt;/orderedlist&gt;</a>
<a name="189"><span class="lineNum">     189 </span>            : &lt;/para&gt;</a>
<a name="190"><span class="lineNum">     190 </span>            : &lt;para&gt;&lt;bold&gt;Notes&lt;/bold&gt;:&lt;itemizedlist&gt;</a>
<a name="191"><span class="lineNum">     191 </span>            : &lt;listitem&gt;&lt;para&gt;For more details on building Charm++, see the directions &lt;ulink url=&quot;http://charm.cs.illinois.edu/manuals/html/charm++/A.html&quot;&gt;here&lt;/ulink&gt; The correct target is &lt;computeroutput&gt;charm++&lt;/computeroutput&gt; and, for a personal machine, the correct target architecture is likely to be &lt;computeroutput&gt;multicore-linux-x86_64&lt;/computeroutput&gt; (or &lt;computeroutput&gt;multicore-darwin-x86_64&lt;/computeroutput&gt; on macOS). On an HPC system, the correct Charm++ target architecture depends on the machine&amp;apos;s inter-node communication architecture. We will be providing specific instructions for various HPC systems.&lt;/para&gt;</a>
<a name="192"><span class="lineNum">     192 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Both Charm++ and SpECTRE must be compiled using the same compiler, otherwise you will receive undefined reference errors while linking SpECTRE. When compiling Charm++ you can specify the compiler using, for example, &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;./build&lt;sp/&gt;charm++&lt;sp/&gt;ARCH&lt;sp/&gt;clang&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="193"><span class="lineNum">     193 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="194"><span class="lineNum">     194 </span>            : &lt;para&gt;When compiling SpECTRE you can specify the compiler to CMake using, for example, &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;cmake&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_CXX_COMPILER=clang++&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="195"><span class="lineNum">     195 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_C_COMPILER=clang&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="196"><span class="lineNum">     196 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CMAKE_Fortran_COMPILER=gfortran&lt;sp/&gt;\&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="197"><span class="lineNum">     197 </span>            : &lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;&lt;sp/&gt;-D&lt;sp/&gt;CHARM_ROOT=CHARM_DIR/ARCH_OPTS&lt;sp/&gt;SPECTRE_ROOT&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="198"><span class="lineNum">     198 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="199"><span class="lineNum">     199 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Inside the SpECTRE build directory, use &lt;computeroutput&gt;make list&lt;/computeroutput&gt; to see all available targets. This list can be refreshed by running CMake again.&lt;/para&gt;</a>
<a name="200"><span class="lineNum">     200 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="201"><span class="lineNum">     201 </span>            : &lt;/para&gt;</a>
<a name="202"><span class="lineNum">     202 </span>            : &lt;/sect2&gt;</a>
<a name="203"><span class="lineNum">     203 </span>            : &lt;/sect1&gt;</a>
<a name="204"><span class="lineNum">     204 </span>            : &lt;sect1 id=&quot;installation_1autotoc_md167&quot;&gt;</a>
<a name="205"><span class="lineNum">     205 </span>            : &lt;title&gt;Code Coverage Analysis&lt;/title&gt;</a>
<a name="206"><span class="lineNum">     206 </span>            : &lt;para&gt;For any coverage analysis you will need to have LCOV installed on the system. For documentation coverage analysis you will also need to install &lt;ulink url=&quot;https://github.com/psycofdj/coverxygen&quot;&gt;coverxygen&lt;/ulink&gt; and for test coverage analysis &lt;ulink url=&quot;https://gcc.gnu.org/onlinedocs/gcc/Gcov.html&quot;&gt;gcov&lt;/ulink&gt;.&lt;/para&gt;</a>
<a name="207"><span class="lineNum">     207 </span>            : &lt;para&gt;If you have these installed (which is already done if you are using the docker container), you can look at code coverage as follows:&lt;/para&gt;</a>
<a name="208"><span class="lineNum">     208 </span>            : &lt;para&gt;&lt;orderedlist&gt;</a>
<a name="209"><span class="lineNum">     209 </span>            : &lt;listitem&gt;&lt;para&gt;On a gcc build, pass &lt;computeroutput&gt;-D COVERAGE=ON&lt;/computeroutput&gt; to &lt;computeroutput&gt;cmake&lt;/computeroutput&gt;&lt;/para&gt;</a>
<a name="210"><span class="lineNum">     210 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;&lt;computeroutput&gt;make unit-test-coverage&lt;/computeroutput&gt;&lt;/para&gt;</a>
<a name="211"><span class="lineNum">     211 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;The output is in &lt;computeroutput&gt;docs/html/unit-test-coverage&lt;/computeroutput&gt;. &lt;/para&gt;</a>
<a name="212"><span class="lineNum">     212 </span>            : &lt;/listitem&gt;&lt;/orderedlist&gt;</a>
<a name="213"><span class="lineNum">     213 </span>            : &lt;/para&gt;</a>
<a name="214"><span class="lineNum">     214 </span>            : &lt;/sect1&gt;</a>
<a name="215"><span class="lineNum">     215 </span>            :     &lt;/detaileddescription&gt;</a>
<a name="216"><span class="lineNum">     216 </span>            :   &lt;/compounddef&gt;</a>
<a name="217"><span class="lineNum">     217 </span>            : &lt;/doxygen&gt;</a>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.14</a></td></tr>
  </table>
  <br>

</body>
</html>
